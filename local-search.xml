<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Image Spatial Operations and Filtering</title>
    <link href="/2022/03/16/2022-3-16-Image-Spatial-Operations-and-Filtering/"/>
    <url>/2022/03/16/2022-3-16-Image-Spatial-Operations-and-Filtering/</url>
    
    <content type="html"><![CDATA[<p>Support <code>.ipynb</code> and images are <ahref="https://github.com/Judera9/Pictures-for-Blogs/tree/main/file/DIP%20support%20files/spatial%20operation%20and%20filtering">here</a></p><h1 id="spatial-transforms-and-filtering">Spatial Transforms andFiltering</h1><ul><li><a href="#spatial-transforms-and-filtering">Spatial Transforms andFiltering</a><ul><li><a href="#introduction">Introduction</a></li><li><a href="#task-1">Task 1</a><ul><li><a href="#histogram-equalization">Histogram Equalization</a><ul><li><a href="#principle">Principle</a></li><li><a href="#pseudo-code">Pseudo Code</a></li><li><a href="#implementation">Implementation</a></li></ul></li></ul></li></ul></li><li><a href="#def-hist">def hist</a><ul><li><a href="#task-2">Task 2</a><ul><li><a href="#histogram-match">Histogram Match</a><ul><li><a href="#principle-1">Principle</a></li><li><a href="#pseudo-code-1">Pseudo Code</a></li><li><a href="#implementation-1">Implementation</a></li></ul></li><li><a href="#gamma-transform">Gamma Transform</a></li><li><a href="#local-statistic-enhancement">Local StatisticEnhancement</a></li></ul></li><li><a href="#task-3">Task 3</a><ul><li><a href="#local-histogram-equalization">Local HistogramEqualization</a><ul><li><a href="#principle-2">Principle</a></li><li><a href="#pseudo-code-2">Pseudo Code</a></li><li><a href="#implementation-2">Implementation</a></li></ul></li><li><a href="#gamma-transform-1">Gamma Transform</a></li><li><a href="#local-statistic-enhancement-1">Local StatisticEnhancement</a></li></ul></li><li><a href="#task-4">Task 4</a><ul><li><a href="#box-filter">Box Filter</a><ul><li><a href="#principle-3">Principle</a></li><li><a href="#pseudo-code-3">Pseudo Code</a></li><li><a href="#implementation-3">Implementation</a></li></ul></li><li><a href="#median-filter">Median Filter</a><ul><li><a href="#principle-4">Principle</a></li><li><a href="#pseudo-code-4">Pseudo Code</a></li><li><a href="#implementation-4">Implementation</a></li></ul></li><li><a href="#gaussian-filter">Gaussian Filter</a><ul><li><a href="#principle-5">Principle</a></li><li><a href="#pseudo-code-5">Pseudo Code</a></li><li><a href="#implementation-5">Implementation</a></li></ul></li></ul></li><li><a href="#results">Results</a><ul><li><a href="#task-1-1">Task 1</a></li><li><a href="#task-2-1">Task 2</a></li><li><a href="#task-3-1">Task 3</a></li><li><a href="#task-4-1">Task 4</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul></li></ul><h2 id="introduction">Introduction</h2><p>The spatial operations directly operate the pixels of an image, sothey are usually efficient and low-resource-occupying. Besides, somespatial nonlinear filtering techniques, like the median filter discussedbelow, could achieve fantastic results in certain conditions (SAP)rather than other transform domain operations. Therefore, it issignificant to learn and implement some classical image spatialoperations.</p><p>Spatial operations are mainly divided into intensity transformationsand spatial filtering. Intensity transformations usually operate withsingle pixels, such as gamma transform, which could generally bedepicted by <span class="math inline">\(s=T[r]\)</span> (r is a 1 x 1input pixel, s is the output pixel). Spatial filtering usually operateswith the neighbor of pixels, such as linear box filtering.</p><p>The usage of spatial operations are extraordinarily wide, the imageenhancement and denoising discussed in this lab are just one of them.Actually, some of the Neural Network and Deep Learning technologies alsouse spatial operations to extract image features.</p><p>The enhancement methods discussed in this report are listedbelow:</p><table><colgroup><col style="width: 44%" /><col style="width: 55%" /></colgroup><thead><tr class="header"><th>Enhancement Method</th><th>Description</th></tr></thead><tbody><tr class="odd"><td>Basic intensity transformation (Gamma transform)</td><td>Gamma transform is the simplest method for implementation, and itsresult is pretty good after tuning the <spanclass="math inline">\(\gamma\)</span> factor</td></tr><tr class="even"><td>Histogram equalization</td><td>It can automatically redistribute the gray scales according tohistogram, spread out the centralized histogram bins. However, it cannot generate new gray scales and would sometimes cause "wash-out"</td></tr><tr class="odd"><td>Histogram matching (specification)</td><td>User need to design a probability distribution <spanclass="math inline">\(pdf(z_q)\)</span> as a desired histogram. Thismethod could withstand the "wash-out" effect</td></tr><tr class="even"><td>Local Histogram Equalization</td><td>It iterate histogram equalization in small neighbors, theenhancement effect in local details is better, but the time-costincreases as well</td></tr><tr class="odd"><td>Histogram statistic filtering (mean and variance)</td><td>Need to put effort on tuning parameters, but it is more flexible toenhance certain areas or details. Prior knowledge might beessential</td></tr></tbody></table><p>The denoising (SAP) methods discussed in this report are also listedbelow:</p><table><colgroup><col style="width: 40%" /><col style="width: 60%" /></colgroup><thead><tr class="header"><th>Denoising Method</th><th>Description</th></tr></thead><tbody><tr class="odd"><td>Box filter (Linear filter)</td><td>Actually is calculating average in a neighbor. It could smooth someof the noise, but the edge blur are also apparent</td></tr><tr class="even"><td>Median filter</td><td>Might be the best choice for SAP, because it would not cause edgeblur effect. But for many other kinds of noise, it might not be a goodchoice</td></tr><tr class="odd"><td>Gaussian low pass filter (Linear filter)</td><td>For gaussian noise it might be a good choice, but it also cause edgeblur like box filter does (but less blur rather than box filter)</td></tr></tbody></table><h2 id="task-1">Task 1</h2><h3 id="histogram-equalization">Histogram Equalization</h3><h4 id="principle">Principle</h4><p><span class="math inline">\(s\)</span> is the processed pixel, <spanclass="math inline">\(r\)</span> is the input pixel and <spanclass="math inline">\(p_i(i)\)</span> is the corresponding PDF of grayscale. Note that this is the proof for continuous condition, discrete issimilar, changing integral to sum, and the <spanclass="math inline">\(s=T(r)\)</span> step need to map <spanclass="math inline">\(s\)</span> to the nearest integer. <spanclass="math display">\[\begin{aligned}s &amp; =T(r)=(L-1)\int^{r}_0p_r(w)dw \\prove \ how \ &amp; it \ works: \\  &amp; \left\{\begin{aligned}p_s(s) &amp; =p_r(r)|\frac{dr}{ds}| \\s &amp; =T(r)=(L-1)\int^{r}_0p_r(w)dw\end{aligned}\right. \\\\\Rightarrow\frac{ds}{dr} &amp;=\frac{dT(r)}{dr}=(L-1)\frac{d}{dr}[\int^r_0p_r(w)dw]=(L-1)p_r(r) \\\Rightarrow p_s(s)&amp;=p_r(r)|\frac{dr}{ds}|=p_r(r)|\frac{1}{(L-1)p_r(r)}|=\frac{1}{L-1}\quad 0\leq s\leq L-1\end{aligned}\]</span></p><h4 id="pseudo-code">Pseudo Code</h4><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hist</span>(<span class="hljs-params">arr</span>):</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">return the histogram of a given array (ravel or unravel are both fine)</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>init histogram <span class="hljs-keyword">with</span> zeros<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> whole gray scale<br>        calculate the number of pixels that <span class="hljs-string">&#x27;value = i&#x27;</span><br>    <span class="hljs-keyword">return</span> histogram<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hist_equ</span>(<span class="hljs-params">arr</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Remap the gray scale of arr according to CDF(r)</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    input_hist = hist(arr) <span class="hljs-comment"># `hist` is defined above</span><br>    calculate p(r) by normalizing -&gt; r_pdf<br>    calculate integral[p(r)] by accumulate p(r) -&gt; r_cdf<br>    init output <span class="hljs-keyword">with</span> zeros<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">256</span>:<br>    change pixels(arr) that <span class="hljs-string">&#x27;value = i&#x27;</span> into <span class="hljs-string">&#x27;value = r_cdf[i]&#x27;</span> -&gt; output<br>    <span class="hljs-keyword">return</span> output<br></code></pre></td></tr></table></figure><h4 id="implementation">Implementation</h4><p>Prove the correctness of my histogram method, I compare it with<code>np.histogram</code>, it turns out that they are the same. Notethat I do not iterate the whole image with two <code>for</code> loops,because of two reason:</p><ol type="1"><li><code>numpy</code> is written by high quality C in bottom, it ismuch more efficient than row python codes</li><li>the tricky <code>np.sum</code> method has bottom accelerationsupported by <code>numpy</code>, so I iterate all the possible grayvalues rather than iterate the (H, W) axis with two <code>for</code>loops (Although iterate gray scales has higher time complexity thaniterate the image with two <code>for</code>, it is actually faster)</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># def hist</span><br>_hist = np.zeros(_<span class="hljs-built_in">max</span> - _<span class="hljs-built_in">min</span> + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(_<span class="hljs-built_in">min</span>, _<span class="hljs-built_in">max</span> + <span class="hljs-number">1</span>):<br>    _hist[v] = np.<span class="hljs-built_in">sum</span>(arr == v)<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-16471935845342.png" alt="output" style="zoom:60%;" /></p><p>Only use one <code>for</code> loop to implement this algorithm.Actually, the optimize methods for python is similar with<code>@matlab</code>, which is efficient with matrix operations.Therefore, the object of optimizing python code could be concludedas:</p><ol type="1"><li>use less <code>for</code> loops</li><li>use more <code>numpy</code> methods and matrix operations</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># def hist_equ</span><br>input_hist = hist(arr.ravel())<br>r_pdf = np.array(input_hist) / np.<span class="hljs-built_in">sum</span>(input_hist)<br>r_cdf = np.<span class="hljs-built_in">round</span>(<span class="hljs-number">255</span> * np.cumsum(r_pdf))<br>output_image = np.zeros_like(arr)<br><span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">256</span>):<br>    output_image[arr == idx] = r_cdf[idx]<br><span class="hljs-keyword">return</span> output_image<br></code></pre></td></tr></table></figure><h2 id="task-2">Task 2</h2><h3 id="histogram-match">Histogram Match</h3><h4 id="principle-1">Principle</h4><p>First consider the continuous condition, we want to get a transformof <span class="math inline">\(z=\hat{T}[r]\)</span>, <spanclass="math inline">\(p(z)\)</span> is the desired histogram designed.We introduce a variable <span class="math inline">\(s\)</span> fortransition, and we get <spanclass="math inline">\(z=G^{-1}[T(r)]\)</span>: <spanclass="math display">\[\begin{aligned}s&amp;=T(r)=(L-1)\int_0^rp_r(w)dw \\G(z)&amp;=(L-1)\int^r_0p_z(t)dt=s \\&amp;\Rightarrowz=G^{-1}[T(r)]=G^{-1}(s)\end{aligned}\]</span> The discrete time condition is similar, we do not need tosolve <span class="math inline">\(G^{-1}\)</span> any more, because wecan get a integer mapping relationship (round) using <spanclass="math inline">\(s_k=G(z_q)\)</span>, if we want to know <spanclass="math inline">\(z_q\)</span>, just iterate the array of <spanclass="math inline">\(s_k\)</span>. Here is the proof: <spanclass="math display">\[\begin{aligned}s_k&amp;=T(r_k)=(L-1)\sum^k_{j=0}p_r(r_j)=\frac{L-1}{MN}\sum^k_{j=0}n_j\\G(z_q)&amp;=(L-1)\sum^q_{i=0}p_z(z_i)=s_k \\&amp;\Rightarrowz_q=G^{-1}(s_k)=G^{-1}[T(r_k)]\end{aligned}\]</span></p><h4 id="pseudo-code-1">Pseudo Code</h4><p>First we need to design a <code>z_q</code>, and pass itshistogram</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hist_match</span>(<span class="hljs-params">arr, spec_hist</span>):</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">Do histogram match according to given spec_hist</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>input_hist = hist(arr) <span class="hljs-comment"># `hist` is defined above</span><br>calculate CDF(s_k) <span class="hljs-keyword">as</span> we do <span class="hljs-keyword">in</span> histogram equalization -&gt; s_k<br>calculate CDF(z_q2s_k) <span class="hljs-keyword">from</span> the given histogram(spec_hist) -&gt; z_q2s_k<br>init output <span class="hljs-keyword">with</span> zeros<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">256</span>:<br>    find the indices that satisfy <span class="hljs-string">&#x27;s_k &lt;= z_q2s_k&#x27;</span> <span class="hljs-keyword">and</span> choose the smallest -&gt; idx<br>    change pixels(arr) that <span class="hljs-string">&#x27;value = i&#x27;</span> into idx -&gt; output<br>    <span class="hljs-keyword">return</span> output<br></code></pre></td></tr></table></figure><h4 id="implementation-1">Implementation</h4><p>I design two <span class="math inline">\(pdf(z_q)\)</span> here, theblue one is expected to be better for easing the "wash-out" effect.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-16471964888277.png" alt="output" style="zoom:65%;" /></p><p>Notice that I also only use one <code>for</code> loop, I use many<code>numpy</code> tricks to avoid using <code>for</code>. During thefor loop, I cut some of the iteration values of all these variables, itworks out correctly.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># def hist_match</span><br>input_hist = hist(arr.ravel())<br>s_k = np.<span class="hljs-built_in">round</span>(<span class="hljs-number">255</span> / np.<span class="hljs-built_in">sum</span>(input_hist) * np.cumsum(input_hist))<br>z_q2s_k = np.<span class="hljs-built_in">round</span>(<span class="hljs-number">255</span> * np.cumsum(spec_hist))<br>output_image = np.zeros_like(arr)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">256</span>):  <span class="hljs-comment"># r -&gt; s</span><br>    idx = np.where(s_k[i] &lt;= z_q2s_k)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]  <span class="hljs-comment"># s -&gt; z</span><br>    output_image[arr == i] = idx<br><span class="hljs-keyword">return</span> output_image<br></code></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust">rk: <span class="hljs-number">0</span> sk: <span class="hljs-number">147</span> zq2sk: <span class="hljs-number">145</span> zq: <span class="hljs-number">57</span><br>rk: <span class="hljs-number">1</span> sk: <span class="hljs-number">155</span> zq2sk: <span class="hljs-number">155</span> zq: <span class="hljs-number">60</span><br>rk: <span class="hljs-number">2</span> sk: <span class="hljs-number">163</span> zq2sk: <span class="hljs-number">163</span> zq: <span class="hljs-number">63</span><br>rk: <span class="hljs-number">3</span> sk: <span class="hljs-number">166</span> zq2sk: <span class="hljs-number">166</span> zq: <span class="hljs-number">64</span><br>rk: <span class="hljs-number">4</span> sk: <span class="hljs-number">171</span> zq2sk: <span class="hljs-number">171</span> zq: <span class="hljs-number">66</span><br>rk: <span class="hljs-number">5</span> sk: <span class="hljs-number">175</span> zq2sk: <span class="hljs-number">173</span> zq: <span class="hljs-number">67</span><br>rk: <span class="hljs-number">6</span> sk: <span class="hljs-number">180</span> zq2sk: <span class="hljs-number">178</span> zq: <span class="hljs-number">69</span><br>rk: <span class="hljs-number">7</span> sk: <span class="hljs-number">184</span> zq2sk: <span class="hljs-number">183</span> zq: <span class="hljs-number">71</span><br>rk: <span class="hljs-number">8</span> sk: <span class="hljs-number">186</span> zq2sk: <span class="hljs-number">185</span> zq: <span class="hljs-number">72</span><br>...<br></code></pre></td></tr></table></figure><h3 id="gamma-transform">Gamma Transform</h3><p>The principle could not be simpler. It is one of the most widely usedintensity transformation method, actually it has a pretty good effect onenhancing Q3_2.tif and Q3_3.tif. The time it costs is also very low:<span class="math display">\[s=cr^{\gamma}\]</span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gamma_transform</span>(<span class="hljs-params">arr, gamma</span>):</span><br>    gamma_img = np.<span class="hljs-built_in">round</span>(np.power(arr / <span class="hljs-number">255.0</span>, gamma) * <span class="hljs-number">255</span>).astype(<span class="hljs-built_in">int</span>)<br>    <span class="hljs-keyword">return</span> gamma_img<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output.png" alt="output" style="zoom:65%;" /></p><h3 id="local-statistic-enhancement">Local Statistic Enhancement</h3><p>The statistic property we are interested are mean and variance(secondary moment), here we can calculate the global mean <spanclass="math inline">\(m_G\)</span> and variance <spanclass="math inline">\(\sigma^2_G\)</span>, then get the standardvariance <span class="math inline">\(\sigma_G\)</span>: <spanclass="math display">\[\begin{aligned}\mu_2(r)&amp; =\sigma^2=\sum^{L-1}_{i=0}(r_i-m)^2p(r_i) \\m&amp; =\sum^{L-1}_{i=0}r_ip(r_i) \\\end{aligned}\]</span> During local enhancement, we calculate mean and variance ofthe neighbor, then use the last equation below to decide whether enhancethe current pixel or not. <spanclass="math inline">\(E,k_0,k_1,k_2,k_3\)</span> are the parameters todesign and tune. <span class="math display">\[\begin{aligned}m_{S_{xy}} &amp; =\sum^{L-1}_{i=0}r_ip_{S_{xy}}(r_i) \\\sigma^2_{S_{xy}} &amp;=\sum^{L-1}_{i=0}(r_i-m_{S_{xy}})^2p_{S_{xy}}(r_i) \\g(x,y) &amp; =\left\{\begin{aligned}&amp; E \cdot f(x,y), \quad k_0m_G\leq m_{S_{xy}} \leq k_1m_G , \k_2\sigma_G\leq \sigma_{S_{xy}} \leq k_3\sigma_G\\&amp; f(x,y), \quad otherwise\end{aligned}\right.\end{aligned}\]</span> This method is <code>def local_statistic_adjust(arr, k0, k1,k2, k3, E, m_size=3)</code> in the code file submitted, I have not donemany optimization, therefore this method runs more than 10 seconds forQ3_2.tif.</p><p>The result is not desirable, might because the parameter need to betuned more carefully. However, this image is not suitable for using thismethod to enhance, because the details do not behave similarly. Anotherapproach for utilizing histogram statistics should be designed.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-164719917401210.png" alt="output" style="zoom:65%;" /></p><h2 id="task-3">Task 3</h2><h3 id="local-histogram-equalization">Local Histogram Equalization</h3><h4 id="principle-2">Principle</h4><p>There is no equations and proof for this algorithm. Actually, we doeshistogram equalization for every neighbors. However, this is a veryexpensive process, therefore I think of another tricky way to implementthis algorithm. Like we discussed above, we should use<code>numpy</code> as much as possible and try to reduce operationsunder <code>for</code> loops. Therefore, I re-organize the neighborsinto a <code>Big_Mat</code> and done operations parallelly. <spanclass="math display">\[\begin{aligned}A &amp;= \begin{bmatrix}a_{11} &amp; a_{12} &amp; a_{13} &amp; ... &amp; a_{1n} \\a_{21} &amp; a_{22} &amp; a_{23} &amp; ... &amp; a_{2n} \\a_{31} &amp; a_{32} &amp; a_{33} &amp; ... &amp; a_{3n} \\... &amp; ... &amp; ... &amp; ... &amp; ... \\a_{m1} &amp; a_{m2} &amp; a_{m3} &amp; ... &amp; a_{mn} \\\end{bmatrix} \quad\\Big_Mat &amp;= \begin{bmatrix}a_{11} &amp; a_{12} &amp; a_{13} &amp; a_{21} &amp; a_{22} &amp; a_{23}&amp; a_{31} &amp; a_{32} &amp; a_{33} \\a_{12} &amp; a_{13} &amp; a_{14} &amp; a_{22} &amp; a_{23} &amp; a_{24}&amp; a_{32} &amp; a_{33} &amp; a_{34}\\&amp; ... &amp;  &amp; ... &amp;  &amp; ... &amp;  &amp; ... &amp; \\a_{(m-2)(n-2)} &amp; a_{(m-2)(n-1)} &amp; a_{(m-2)n} &amp;a_{(m-1)(n-2)} &amp; a_{(m-1)(n-1)} &amp; a_{(m-1)n} &amp; a_{m(n-2)}&amp; a_{m(n-1)} &amp; a_{mn}\\\end{bmatrix} \\\end{aligned}\]</span> Another optimizing method is to maintain a global <spanclass="math inline">\(pdf\)</span>, then push and pop elements whileiterating the neighbors, after judging by experience I think the firstone could be more effective, so I just leave the proof here. <spanclass="math inline">\(n_{L_k}\)</span> is the deleted and <spanclass="math inline">\(n_{R_k}\)</span> is the new comer pixels: <spanclass="math display">\[\begin{aligned}p_r(r_k)&amp;=\frac{n_k}{n} \quad\quad k=0, 1, ..., K-1\\\hat{p_r}(r_k)&amp;=\frac{1}{n}[n_k-n_{L_k}+n_{R_k}]=p_r(r_k)+\frac{1}{n}[n_{R_k}-n_{L_k}]\end{aligned}\]</span></p><h4 id="pseudo-code-2">Pseudo Code</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hist</span>(<span class="hljs-params">arr, parallel</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    the input is the (HW x m_size^2) Big_Mat, therefore in this method calculate histogram seperately for each row of Big_Mat. The return array is with size (HW, 256), and each row of it _hist[i] with size (1 , 256) is a single histogram for the (m_size x m_size) neighbor</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    init _hist <span class="hljs-keyword">as</span> zeros<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> whole gray scale<br>        calculate the number of pixels that <span class="hljs-string">&#x27;value = i&#x27;</span> <span class="hljs-keyword">for</span> each row seperately<br>    <span class="hljs-keyword">return</span> _hist<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">img2big_mat</span>(<span class="hljs-params">arr, m_size</span>):</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">change the image into the Big_Mat. For example, a (5 x 6) size gray image is the input `arr`. `m_size` is the scale of the neighborhood size, let it be 3. Therefore, the return Big_Mat would be (30 x 9), and each Big_Mat[i] correspond to a flatten neighborhood with 3 x 3 size.</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>_H <span class="hljs-keyword">is</span> arr height<br>_W <span class="hljs-keyword">is</span> arr width<br><span class="hljs-keyword">assert</span> that _H, _W are large enough <span class="hljs-keyword">for</span> calculation<br>_half <span class="hljs-keyword">is</span> <span class="hljs-number">1</span>/<span class="hljs-number">2</span> of neighbor scale <span class="hljs-comment"># m_size is odd, _half is the smaller half</span><br>_l_half  = _half + <span class="hljs-number">1</span> <span class="hljs-comment"># _l_half is the larger half</span><br>pad the original image -&gt; _padded<br>init Big_Mat <span class="hljs-keyword">as</span> zeros -&gt; big_mat<br>use cnt to record the count of neighbors (axis[<span class="hljs-number">0</span>] of Big_Mat) -&gt; cnt = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i start <span class="hljs-keyword">from</span> _half to (_H + _half)<br><span class="hljs-keyword">for</span> j start form _half to (_W + _half)<br>big_mat[cnt] <span class="hljs-keyword">is</span> the flattened No.cnt neighbor of _padded<br>cnt++<br><span class="hljs-keyword">return</span> _padded, big_mat<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hist_equ</span>(<span class="hljs-params">arr, local=<span class="hljs-literal">True</span></span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    This equalization method deal with a different input, arr is not a (H, W) image any more but a (HW x m_size^2) Big_Mat.Actually this method is the core for local histogram equalization, because many core operations are packed here</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>get the total pixels number (H x W) -&gt; _parallel<br>    get the total neighbor pixel number (m_size x m_size) -&gt; _m2<br>    _half <span class="hljs-keyword">is</span> <span class="hljs-number">1</span>/<span class="hljs-number">2</span> of neighbor scale <span class="hljs-comment"># m_size is odd, _half is the smaller half</span><br>    get hist(arr, _parallel) <span class="hljs-keyword">with</span> size of (_parallel x <span class="hljs-number">256</span>) -&gt; input_hist <span class="hljs-comment"># call from the `hist` method above, return histogram is with size (HW x 256)</span><br>    calculate p(r) by normalizing <span class="hljs-keyword">for</span> each row of input_hist -&gt; r_pdf <span class="hljs-comment"># size is (HW, 256)</span><br>    calculate integral[p(r)] by accumulate p(r) <span class="hljs-keyword">for</span> each row of r_pdf -&gt; r_cdf <span class="hljs-comment"># size is (HW, 256)</span><br>    init output <span class="hljs-keyword">with</span> zeros <span class="hljs-comment"># output is (, HW), can be reshape to (H, W), and that is the result of all the local histrogram equalization process</span><br>    find the center pixel values <span class="hljs-keyword">for</span> <span class="hljs-built_in">all</span> the neighborhoods -&gt; center_pixel <span class="hljs-comment"># this is because that we only care with the result of hisotgram equalization of the center pixel, therefore we have no need to calculate the other m_size^2 - 1 pixels </span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> (H x W): <span class="hljs-comment"># itherate all the neighborhoods</span><br>    find the histogram equalization result <span class="hljs-keyword">for</span> the center_pixel of the No.i neighborhood -&gt; r_cdf[i, center_pixel[i]]<br>        then update this equalized value to output[i]<br>    <span class="hljs-keyword">return</span> output<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">local_hist_equ</span>(<span class="hljs-params">arr, m_size</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Nearly all the local histogram equalization process are packed in above methods, here just call them to get the result!</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    call img2big_mat to get the Big_Mat -&gt; _big_mat<br>    call hist_equ to get the result <span class="hljs-keyword">with</span> size (, HW) -&gt;  output_image<br>    then reshape output_image to (H, W)<br>    <span class="hljs-keyword">return</span> output_image<br></code></pre></td></tr></table></figure><h4 id="implementation-2">Implementation</h4><p>I have done this method with only one <code>for</code> loop as well,therefore the speed is very fast compare to the first version of my code(which has two <code>for</code> loop and runs much slower). Here is myfirst version code, it call the <code>hist_equ(arr)</code> implementedfor only one neighborhood, not the efficient <code>hist_equ(arr,_parallel)</code> used above:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># def local_hist_equ_deprecated</span><br>local_equalized = np.zeros_like(img)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s_half, _H, stride):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s_half, _W, stride):<br>        local_equalized[i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>] = hist_equ(padded_img[i - s_half:i + l_half, j - s_half:j + l_half])[s_half, s_half]<br></code></pre></td></tr></table></figure><p>The implementation codes could be found in supplementary files, I donot list them here. Then I would compare the efficiency of the twostrategy. I do local histogram equalization for <code>m_size = 3, 5,7</code> and plot their running time below:</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-164722285939316.png" alt="output" style="zoom:65%;" /></p><h3 id="gamma-transform-1">Gamma Transform</h3><p>The gamma transform principle and codes are discussed above in<em>Task 1</em>, here I show the result of it. Surprisingly, the detailscould be enhanced perfectly as well. In my opinion, I believe that theother intensity transformation methods could enhance the detailsperfectly as well, like the <em>contrast stretching</em> method.Besides, these intensity transformation methods are usually simple andfast.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-16471925885981.png" alt="output" style="zoom:65%;" /></p><h3 id="local-statistic-enhancement-1">Local Statistic Enhancement</h3><p>The statistic distribution of Q3_3.tif is much simpler than Q3_2.tif,therefore using statistic method would complete the enhancement task,and the parameters I tuned for the effect shown below are: <code>k0 =0.02, k1 = 0.5, k2 = 0, k3 = 0.5, E = 30</code>. However, the effect isnot as good as gamma transform and local histogram equalization.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-164722229456914.png" alt="output" style="zoom:65%;" /></p><h2 id="task-4">Task 4</h2><h3 id="box-filter">Box Filter</h3><h4 id="principle-3">Principle</h4><p>Could also be named as <em>Mean Filter</em>, from a view of FrequencyDomain, it is a kind of low pass filter. Therefore, some edgeinformation are lost and cause blur effect. Below, <spanclass="math inline">\(n\)</span> is the kernel size: <spanclass="math display">\[R=\frac{1}{n^2}\sum^{n^2}_{i=1}z_i \\\]</span> For implementing all the filtering methods, I use the<code>Big_Mat</code> strategy discussed in task 3, here proves that thisstrategy is useful for all kinds of spatial operations associated withkernels (neighborhoods). It is actually a code design optimizationmethod for changing image convolution (correlation) into matrixmultiplication, which has many acceleration methods for differentlanguages: <span class="math display">\[\begin{aligned}&amp;Image \ A ,\ \ Kernel \ K \\A &amp;= \begin{bmatrix}a_{11} &amp; a_{12} &amp; a_{13} &amp; ... &amp; a_{1n} \\a_{21} &amp; a_{22} &amp; a_{23} &amp; ... &amp; a_{2n} \\a_{31} &amp; a_{32} &amp; a_{33} &amp; ... &amp; a_{3n} \\... &amp; ... &amp; ... &amp; ... &amp; ... \\a_{m1} &amp; a_{m2} &amp; a_{m3} &amp; ... &amp; a_{mn} \\\end{bmatrix} \quadK = \begin{bmatrix}k_1 &amp; k_2 &amp; k_3 \\k_4 &amp; k_5 &amp; k_6 \\k_7 &amp; k_8 &amp; k_9 \\\end{bmatrix} \\\\Mat &amp;= \begin{bmatrix}a_{11} &amp; a_{12} &amp; a_{13} &amp; a_{21} &amp; a_{22} &amp; a_{23}&amp; a_{31} &amp; a_{32} &amp; a_{33} \\a_{12} &amp; a_{13} &amp; a_{14} &amp; a_{22} &amp; a_{23} &amp; a_{24}&amp; a_{32} &amp; a_{33} &amp; a_{34}\\&amp; ... &amp;  &amp; ... &amp;  &amp; ... &amp;  &amp; ... &amp; \\a_{(m-2)(n-2)} &amp; a_{(m-2)(n-1)} &amp; a_{(m-2)n} &amp;a_{(m-1)(n-2)} &amp; a_{(m-1)(n-1)} &amp; a_{(m-1)n} &amp; a_{m(n-2)}&amp; a_{m(n-1)} &amp; a_{mn}\\\end{bmatrix} \\\\\hat{k} &amp;= \begin{bmatrix}k_1 &amp; k_2 &amp; k_3 &amp; k_4 &amp; k_5 &amp; k_6 &amp; k_7 &amp;k_8 &amp; k_9\end{bmatrix}^{T} \\&amp; Conv2d(A,K) = (Mat \cdot \hat{k}).Reshape(H, W) \\\end{aligned}\]</span> Another reason for using this <em>Big Mat</em> strategy isthat python has a smart memory allocating bottom logic, therefore, the<code>big_mat</code> created has a well-designed memory distribution inbottom, without <strong>hard copy</strong> (by <code>np.copy</code>) ofanything.</p><h4 id="pseudo-code-3">Pseudo Code</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">linear_filter</span>(<span class="hljs-params">arr, box_size</span>):</span><br>    generate the box filtering kernel <span class="hljs-keyword">from</span> given box_size<br>    _H, _W are the shapes of <span class="hljs-built_in">input</span> image<br>_half <span class="hljs-keyword">is</span> <span class="hljs-number">1</span>/<span class="hljs-number">2</span> of neighbor scale <span class="hljs-comment"># m_size is odd, _half is the smaller half</span><br>_l_half  = _half + <span class="hljs-number">1</span> <span class="hljs-comment"># _l_half is the larger half</span><br>    get the Big Mat by calling img2big_mat(arr) -&gt; arr_big<br>    <span class="hljs-keyword">return</span> arr_big @ kernel <span class="hljs-comment"># &#x27;@&#x27; of course is matrix multiplication</span><br></code></pre></td></tr></table></figure><h4 id="implementation-3">Implementation</h4><p>The implementation use the <code>img2big_mat</code> method discussedin Task 3, and <code>linear_filtered</code> is calculated by matrixmultiplication, thus it runs very fast (without using any<code>for</code> loop)!</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">linear_filter</span>(<span class="hljs-params">arr, box_size=<span class="hljs-number">0</span>, kernel=<span class="hljs-literal">None</span>, pad_mode=<span class="hljs-string">&#x27;constant&#x27;</span></span>):</span><br>    <span class="hljs-keyword">if</span> box_size != <span class="hljs-number">0</span>:<br>        kernel = <span class="hljs-number">1</span> / (box_size ** <span class="hljs-number">2</span>) * np.ones((box_size, box_size))<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">assert</span> kernel <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span><br><br>    _H = arr.shape[<span class="hljs-number">0</span>]<br>    _W = arr.shape[<span class="hljs-number">1</span>]<br>    _kernel_size = kernel.shape[<span class="hljs-number">0</span>]<br>    _half = _kernel_size // <span class="hljs-number">2</span><br>    _l_half = _half + <span class="hljs-number">1</span><br>    _, arr_big = img2big_mat(arr, _kernel_size, pad_mode=pad_mode)<br>    linear_filtered = (arr_big @ kernel.ravel()).reshape(_H, _W)<br>    <span class="hljs-keyword">return</span> linear_filtered<br></code></pre></td></tr></table></figure><h3 id="median-filter">Median Filter</h3><h4 id="principle-4">Principle</h4><p>This is a kind of nonlinear spatial filter, it chooses the statisticmedian value of a neighborhood as its center pixel value. The principleis simple so I do not put redundant equations here.</p><h4 id="pseudo-code-4">Pseudo Code</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">order_filter</span>(<span class="hljs-params">arr, n_size</span>):</span><br>    _H, _W are the shapes of <span class="hljs-built_in">input</span> image<br>_half <span class="hljs-keyword">is</span> <span class="hljs-number">1</span>/<span class="hljs-number">2</span> of neighbor scale <span class="hljs-comment"># m_size is odd, _half is the smaller half</span><br>_l_half  = _half + <span class="hljs-number">1</span> <span class="hljs-comment"># _l_half is the larger half</span><br>    pad the original image -&gt; _padded<br>    init order_filtered <span class="hljs-keyword">with</span> zeros<br>    <span class="hljs-keyword">for</span> i start <span class="hljs-keyword">from</span> _half to (_H + _half)<br><span class="hljs-keyword">for</span> j start form _half to (_W + _half)<br>find median of the correspond neighborhood -&gt; order_filtered[i-<span class="hljs-number">1</span>, j-<span class="hljs-number">1</span>]<br><span class="hljs-keyword">return</span> order_filtered<br></code></pre></td></tr></table></figure><h4 id="implementation-4">Implementation</h4><p>Because this is a nonlinear operation, so I could not use <em>BigMat</em> here for optimizing. As known, matrix multiplication is alinear math tool. However, I use <code>np.median</code> instead, and thespeed turns out to be fast enough, even though I iterate using two<code>for</code> loops.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">order_filter</span>(<span class="hljs-params">arr, n_size, pad_mode=<span class="hljs-string">&#x27;constant&#x27;</span></span>):</span><br>    <span class="hljs-keyword">assert</span> n_size % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>  <span class="hljs-comment"># only handel odd kernel</span><br>    _H = arr.shape[<span class="hljs-number">0</span>]<br>    _W = arr.shape[<span class="hljs-number">1</span>]<br>    _half = n_size // <span class="hljs-number">2</span><br>    _l_half = _half + <span class="hljs-number">1</span><br>    padded = np.pad(arr, (_half, _half), mode=pad_mode)<br>    order_filtered = np.zeros_like(arr)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(_half, _H):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(_half, _W):<br>            order_filtered[i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>] = np.median(padded[i - _half:i + _l_half, j - _half:j + _l_half])<br>    <span class="hljs-keyword">return</span> order_filtered<br></code></pre></td></tr></table></figure><h3 id="gaussian-filter">Gaussian Filter</h3><h4 id="principle-5">Principle</h4><p>Actually, this is a weighted <em>Mean Filter</em>, and the weightsare decided by gaussian distribution. The gaussian kernel could bedesigned by giving <span class="math inline">\(\sigma\)</span> and <spanclass="math inline">\(K\)</span>, the standard deviation. Here is theproof: <span class="math display">\[w(s,t)=G(s,t)=Ke^{-\frac{s^2+t^2}{2\sigma^2}}=Ke^{-\frac{r^2}{2\sigma^2}}\]</span><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/image-20220314102642943.png" alt="image-20220314102642943" style="zoom:67%;" /></p><p>According to the <span class="math inline">\(3\sigma\)</span>principle, the size of a gaussian kernel should be <spanclass="math inline">\([6\sigma,6\sigma]\)</span>, and it should ceil tothe nearest odd integer. For example, <spanclass="math inline">\(\sigma=1\)</span> would lead to a <spanclass="math inline">\([7,7]\)</span> kernel. Another important step fordesigning gaussian kernel is to get the Distance Matrix shown above.</p><h4 id="pseudo-code-5">Pseudo Code</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gaussian_filter</span>(<span class="hljs-params">arr, sigma, K</span>):</span><br>    calculate kernel size <span class="hljs-keyword">from</span> sigma -&gt; _kernel_size<br>    get _H, _W <span class="hljs-keyword">from</span> the shapes of arr -&gt; _H, _W<br>    design the Distance Matrix R<br>    genereate gaussian kernel <span class="hljs-keyword">from</span> the equation given <span class="hljs-keyword">in</span> proof -&gt; kernel<br>    do linear filtering just like box_filter does -&gt; gaussian_filtered<br>    <span class="hljs-keyword">return</span> gaussian_filtered<br></code></pre></td></tr></table></figure><h4 id="implementation-5">Implementation</h4><p>I haven't think a better way to get the distance matrix<code>R</code>, so as seen I use many <code>flip</code> methods todesign it, they might be redundant and complex. However, the time costis very low, because I do not use <code>for</code> loop for thefiltering process. The core optimizing approach is as the abovealgorithms.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gaussian_filter</span>(<span class="hljs-params">arr, sigma, K, pad_mode=<span class="hljs-string">&#x27;constant&#x27;</span></span>):</span><br>    _kernel_size = np.ceil(<span class="hljs-number">6</span> * sigma).astype(<span class="hljs-built_in">int</span>)<br>    _H = arr.shape[<span class="hljs-number">0</span>]<br>    _W = arr.shape[<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">if</span> _kernel_size % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:<br>        _kernel_size += <span class="hljs-number">1</span><br><br>    <span class="hljs-comment"># get the distance matrix</span><br>    R_gen_size = (_kernel_size - <span class="hljs-number">1</span>) // <span class="hljs-number">2</span><br>    R_gen_row = np.arange(<span class="hljs-number">1</span>, R_gen_size + <span class="hljs-number">1</span>) ** <span class="hljs-number">2</span><br>    R_gen = np.zeros((R_gen_size, R_gen_size))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, R_gen_size + <span class="hljs-number">1</span>):<br>        R_gen[i - <span class="hljs-number">1</span>] = R_gen_row + R_gen_row[i - <span class="hljs-number">1</span>]<br>    R_right = np.vstack((np.flipud(R_gen), R_gen_row, R_gen))<br>    R_mid = np.r_[np.flip(R_gen_row), [<span class="hljs-number">0</span>], R_gen_row]<br>    R_left = np.fliplr(R_right)<br>    R = np.hstack((R_left, R_mid.reshape(_kernel_size, <span class="hljs-number">1</span>), R_right))<br><br>    <span class="hljs-comment"># generate coefficient w</span><br>    G = K * np.exp(-R / (<span class="hljs-number">2</span> * sigma ** <span class="hljs-number">2</span>))<br>    kernel = <span class="hljs-number">1</span> / np.<span class="hljs-built_in">sum</span>(G) * G<br><br>    <span class="hljs-keyword">assert</span> _kernel_size % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>  <span class="hljs-comment"># only handel odd kernel</span><br>    gaussian_filtered = linear_filter(arr, kernel=kernel, pad_mode=pad_mode)<br>    <span class="hljs-keyword">return</span> gaussian_filtered<br></code></pre></td></tr></table></figure><h2 id="results">Results</h2><p>Tasks for this lab are listed below:</p><ol type="1"><li>Implement the <strong>histogram equalization</strong> to the inputimages Q3_1_1.tif and Q3_1_2.tif</li><li>Specify a histogram for image Q3_2.tif and implement the<strong>specified histogram matching</strong> to the input imageQ3_2.tif</li><li>Implement the <strong>local histogram equalization</strong> to theinput images Q3_3.tif</li><li>Implement an algorithm to <strong>reduce the salt and peppernoise</strong> of an image</li></ol><h3 id="task-1-1">Task 1</h3><p>This is the result for Q3_1_1, the time used for my histogramequalization method is <code>0.22960257530212402</code> seconds. Theresult is the same as <code>opencv</code>, and the histogram aredistributed as we expected. <strong>A very interesting phenomenon isthat the gray scale with the most pixels would become sparse afterredistribution, and on the contrary, the gray scale with only a fewpixels tend to be dense after equalization</strong>. The explanation issimple and reasonable: the remapping process refers to <spanclass="math inline">\(cdf(r)\)</span> which of course would jump whenthe gray scale occupies a large amount of pixels (just name them<em>dominant gray scales</em>). These <em>dominant gray scales</em> needto be distributed far from each other to make the image have largercontrast, and they actually do.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-16471951140013.png" alt="output" style="zoom:65%;" /></p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-16471951396674.png" alt="output" style="zoom:65%;" /></p><p>This is the result for Q3_1_2, the time used for my histogramequalization method is <code>0.23404693603515625</code> seconds. Thehistogram is also as expected.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-16471957811395.png" alt="output" style="zoom:65%;" /></p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-16471957969016.png" alt="output" style="zoom:65%;" /></p><h3 id="task-2-1">Task 2</h3><p>The two designed <span class="math inline">\(pdf(z_q)\)</span> areplotted above, we could see that the first one is better as we expected.The following figures proved that using histogram matching coulddecrease the "wash-out" effect of histogram equalization. The timecosted for <span class="math inline">\(z_{q1}\)</span> and <spanclass="math inline">\(z_{q2}\)</span> are<code>0.6347625255584717</code> and <code>0.62331223487854</code>.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-164719941724311.png" alt="output" style="zoom:72%;" /></p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-164719957060612.png" alt="output" style="zoom:65%;" /></p><p>However, it dramatically turns out that gamma transform might be thebest solution for this enhancement task. As seen in the following, Ijust casually give a factor <spanclass="math inline">\(\gamma=0.35\)</span> and the details hidden in theright corner appear, and there is not any "wash-out" effect. By the way,the time cost of gamma transform is only<code>0.032987356185913086</code>. The result of local statistic is notgood, its running times is <code>19.913657426834106</code> (no optimize,so there are 2 <code>for</code> loops).</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-164719971968113.png" alt="output" style="zoom:65%;" /></p><h3 id="task-3-1">Task 3</h3><p>If I just use the global histogram equalization method, the result ispoor, and cannot extract the details hidden in the black blocks.Ironically, the SAP noise is enhanced as well apparently.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/image-20220314034344199.png" alt="image-20220314034344199" style="zoom:67%;" /></p><p>Here is all the results I get for Q3_3.tif. We could see that whenusing local equalization: when the <code>m_size</code> is increased from3 to 7, the details (and noise) become much more clearer and we getbetter result. This could be explained: when <code>m_size</code>increases, it means that we use a larger neighborhood for deciding thevalue of center pixels, that is, more information are used. However, thetrade-off is that the time cost increases, from<code>4.724057197570801</code> to <code>9.002043008804321</code> for<code>m_size = 3, 7</code>.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-164722309058217.png" alt="output" style="zoom:65%;" /></p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-164722312382318.png" alt="output" style="zoom:65%;" /></p><h3 id="task-4-1">Task 4</h3><p>All the results are plotted here. The running time of order filter isa little higher because it uses two <code>for</code> loops to iteratethe image height and width, and time for <code>n_size = 3, 7</code> are<code>3.73285174369812</code> and <code>3.608351707458496</code>seconds. The box filter method time cost are<code>0.29807138442993164</code> and <code>0.4164392948150635</code>,for <code>n_size = 3, 7</code> as well. The corresponding time costs forgaussian filter are <code>0.4878067970275879</code> and<code>0.813880443572998</code>, which are higher than box filter,because it generally has larger kernel size.</p><p>The order filter (Median Filter) has the best denoising result. Thisis as our expectation, because it is suitable to deal with SAP noise.The other linear filtering methods all cause different level of blureffect. Besides, if I use <em>Zero Padding</em> for kernels that arelarge, it would cause black margins like the figure below using <spanclass="math inline">\(\sigma=3.5\)</span> for gaussian filter. Using the<em>Reflected</em> padding strategy would avoid this.</p><p><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/output-164722624560219.png" alt="output" style="zoom:65%;" /></p><h2 id="conclusion">Conclusion</h2><p>In conclusion for the <em>Enhancement</em> tasks:</p><table><colgroup><col style="width: 43%" /><col style="width: 56%" /></colgroup><thead><tr class="header"><th>Methods</th><th>Conclusion</th></tr></thead><tbody><tr class="odd"><td>Intensity Transformation (like gamma transform)</td><td>The principle of these kinds of methods are really simple, and allwe need to do is to design <span class="math inline">\(s=T(r)\)</span>for single pixels. It turns out that gamma transform performs very wellfor the task 2 &amp;3. Another advantage of Intensity transformationmethods is that they could run fast.</td></tr><tr class="even"><td>Global Histogram Methods</td><td>Its core concept is to remap the different gray scales to largerdistance with each other. The biggest advantage of Histogramequalization is that it works automatically. However, "wash-out" mightoccurs if most of the pixels are at the very dark gray scales, using aspecification method with a designed histogram could relieve thiseffect.</td></tr><tr class="odd"><td>Local Histogram Methods</td><td>Local histogram equalization could extract details hidden in animage magically, but it is usually very time-consuming. Besides, all ofthe histogram methods might inflate the noise somehow, they could notdiffer noise from details. The histogram statistic methods are veryflexible, I only implement one usage of it, but this always associatewith heavy tuning works.</td></tr></tbody></table><p>In conclusion for the <em>Filtering</em> task:</p><table><colgroup><col style="width: 36%" /><col style="width: 63%" /></colgroup><thead><tr class="header"><th>Methods</th><th>Conclusion</th></tr></thead><tbody><tr class="odd"><td>Linear Filtering</td><td>Linear filtering methods like box filter and weighted mean filters(gaussian filter) could weaken the SAP noise, but they also cause edgeblur. This is because of their low-pass property. In my opinion, theymight show their ability deal with some kinds of continuous noise, likegaussian noise.</td></tr><tr class="even"><td>Nonlinear Filtering (Median Filter)</td><td>The advantage of Median Filter for dealing with SAP noise shows theadvantage of spatial filtering than frequency filtering. Using thestatistic property of neighborhood, like median, might avoid filteringthe edge information and cause blur.</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category>DIP</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DIP</tag>
      
      <tag>NumPy</tag>
      
      <tag></tag>
      
      <tag>Histogram</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>proxyConnection refused</title>
    <link href="/2022/03/16/2022-3-16-Connection-refused-error-for-proxy/"/>
    <url>/2022/03/16/2022-3-16-Connection-refused-error-for-proxy/</url>
    
    <content type="html"><![CDATA[<p><em>Ubuntu-Network-NetworkProxy</em><code>wget</code><code>Failedto connect to 127.0.0.1 port 7080: Connectionrefused</code>proxyip</p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">$ env|grep -I proxy <span class="hljs-comment"># find whether proxy is used</span><br><br>no_proxy=<br>https_proxy=http://127.0.0.1:7890/<br>http_proxy=http://127.0.0.1:7890/<br>all_proxy=socks://127.0.0.1:7891/<br><br><span class="hljs-comment"># try to reset proxy, I success on this</span><br>$ <span class="hljs-built_in">export</span> http_proxy=<span class="hljs-string">&quot;&quot;</span><br>$ <span class="hljs-built_in">export</span> https_proxy=<span class="hljs-string">&quot;&quot;</span><br>$ <span class="hljs-built_in">export</span> HTTP_PROXY=<span class="hljs-string">&quot;&quot;</span><br>$ <span class="hljs-built_in">export</span> HTTPS_PROXY=<span class="hljs-string">&quot;&quot;</span><br><br>$ wget ... <span class="hljs-comment"># okay!</span><br></code></pre></td></tr></table></figure><p><code>unset</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">unset</span> http_proxy<br>$ <span class="hljs-built_in">unset</span> ftp_proxy<br>$ <span class="hljs-built_in">unset</span> all_proxy<br>$ <span class="hljs-built_in">unset</span> https_proxy<br>$ <span class="hljs-built_in">unset</span> no_proxy<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Tricks</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Proxy</tag>
      
      <tag>Ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Image Interpolation</title>
    <link href="/2022/03/04/2022-3-4-Image-Interpolation/"/>
    <url>/2022/03/04/2022-3-4-Image-Interpolation/</url>
    
    <content type="html"><![CDATA[<p>Support <code>.ipynb</code> and images could be found <ahref="https://github.com/Judera9/Pictures-for-Blogs/tree/main/file/DIP%20support%20files/interpolation">here</a></p><span id="more"></span><h1 id="image-interpolation">Image Interpolation</h1><ul><li><a href="#image-interpolation">Image Interpolation</a><ul><li><a href="#objectives">Objectives</a></li><li><a href="#principle">Principle</a><ul><li><a href="#geometric-center-alignment">Geometric CenterAlignment</a></li><li><a href="#nearest-neighbor-interpolation">Nearest NeighborInterpolation</a><ul><li><a href="#derivation">Derivation</a></li><li><a href="#pseudo-code">Pseudo Code</a></li></ul></li><li><a href="#bilinear-interpolation">Bilinear Interpolation</a><ul><li><a href="#derivation-1">Derivation</a></li><li><a href="#pseudo-code-1">Pseudo Code</a></li></ul></li><li><a href="#bicubic-interpolation">Bicubic Interpolation</a><ul><li><a href="#derivation-2">Derivation</a></li><li><a href="#pseudo-code-2">Pseudo Code</a></li></ul></li></ul></li><li><a href="#analysis">Analysis</a><ul><li><a href="#brief-results">Brief Results</a></li><li><a href="#nearest-neighbor-interpolation-1">Nearest NeighborInterpolation</a></li><li><a href="#bilinear-interpolation-1">Bilinear Interpolation</a></li><li><a href="#time-complexity-analysis">Time Complexity Analysis</a><ul><li><a href="#enlarge">Enlarge</a></li><li><a href="#shrunk">Shrunk</a></li></ul></li></ul></li><li><a href="#reference">Reference</a></li></ul></li></ul><h2 id="objectives">Objectives</h2><p>The task of this lab homework is to understand and accomplish codesdesign for <em>nearest neighbor interpolation, bilinear interpolationand bicubic interpolation</em> in python. The specific implementation ofthese algorithms is packed in corresponding <code>.py</code> files, thereport and test codes are embedded in the <code>.ipynb</code> file. Thereport contains the derivations, principles and Pseudo codes of thealgorithms mentioned above, and then given some optimization, extensionand analysis of the results.</p><p>Image Interpolation is a significant issue in DIP, we need it whenresizing or distorting images from one pixel grid to another. Therefore,the effect and time consumed by varied interpolation algorithms areextraordinarily important. <strong>However, There is always trade-offbetween efficiency and effect</strong>.</p><h2 id="principle">Principle</h2><h3 id="geometric-center-alignment">Geometric Center Alignment</h3><p>Actually, during interpolation we view pixel positions not asinteger, but as float values, this understanding helps when implementingthose interpolation algorithms. The meaning of geometric centeralignment is that the original figure and the new figure should bealigned based on the image center, not the left side. To achieve this, acoordinate transform is essential, here is an example as the figureshows (sampling from 4 to 5):</p><p><span class="math display">\[transform factor \ \alpha=\frac{src size}{dst size} \\src=(dst+0.5)\times\alpha-0.5\]</span> If I want to find the position of A' in float, or find theindex of its neighbors. Here is the calculation:</p><p><span class="math display">\[\alpha=\frac{5}{4} \\A=(dst+0.5)\times\alpha \\idx_{left}=floor(A-0.5) \\idx_{right}=ceil(A-0.5)\]</span></p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_figure1.jpeg" height="175"></center><center>fig-1 example of center alignment</center><h3 id="nearest-neighbor-interpolation">Nearest NeighborInterpolation</h3><h4 id="derivation">Derivation</h4><p>Nearest interpolation is a very simple interpolation method. For anew point of the resized figure, its value is the same with the nearestpoint of the original figure. The approach we find this nearest point isby using <code>round</code> operation after calculate the position ofthe new point in the original coordinate(multiply a factor of <spanclass="math inline">\(\frac{original dimension}{newdimension}\)</span>). Note that before all these operations, we need totransform the indices for center alignment.</p><p>For example, the following <em>fig-2</em> shows an original figure ofsize 2 x 2, we want to enlarge it to size 3 x 3. Assume <spanclass="math inline">\((x, y)\)</span> is a point of the resized figure,then its position in the original frame is <spanclass="math inline">\((2x/3, 2x/3)\)</span>. The result often is a floatvector, then round it to integer, e.g., <span class="math inline">\((1,2) \to (0.67, 1.33) \to (1, 1)\)</span>. Shrunk is similar withenlarging.</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_figure2.jpeg" height="300"></center><center>fig-2 example of nearest neighbor</center><h4 id="pseudo-code">Pseudo Code</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><pre><code class="hljs pseudocode">// nearest_11910206<br>begin with parameters input_file, [h_new, w_new]<br><br>    // get input array from filename or just array<br>    error handling<br>    array input_raw<br><br>    // get resize factor, the \alpha mentioned above<br>    float h_fac, w_fac<br>    compute h_fac = h_raw / h_new<br>    compute w_fac = w_raw / w_new<br><br>    // get bias values for center alignment<br>    array interpolated<br>    bias float h_bias, w_bias<br>    compute h_bias = 0.5 * h_fac - 0.5<br>    compute w_bias = 0.5 * w_fac - 0.5<br><br>    // two `for` loops to iterate all items in array interpolated<br>    for index i<br>        for index j<br><br>            // get the nearest neighbor&#x27;s index [h_idx, w_idx]<br>            integer h_idx, w_idx<br>            compute h_idx = round(h_bias + h_fac * i)<br>            compute w_idx = round(w_bias + w_fac * j)<br>            update interpolated[i, j]<br><br>    return interpolated<br>end<br></code></pre></td></tr></table></figure><h3 id="bilinear-interpolation">Bilinear Interpolation</h3><h4 id="derivation-1">Derivation</h4><p><strong>Using repeated linearinterpolation:</strong><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint--rounded" aria-label="Bilinear_interpolation.https://en.wikipedia.org/wiki/Bilinear_interpolation.">[1]</span></a></sup></p><p>First consider a linear interpolation example in 1-D, like thefollowing figure. The value of f(x) can be expressed by the two neighborpoints: <spanclass="math inline">\(f(x)=\frac{x_2-x}{x_2-x_1}f(x_1)+\frac{x-x_1}{x_2-x_1}f(x_2)\)</span>.Therefore, f(x) can be seen as a weighted average of f(x_1) and f(x_2).<strong>Significantly, the border condition of bilinear interpolationcan be regarded as linear condition during implementation</strong>.Besides, <span class="math inline">\(x_2-x_1\)</span> normally equal toone in image interpolation because the operation is down pixel bypixel.</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_figure4.jpeg" height="150"></center><center>fig-3 linear interpolation</center><p>Then, extend the conclusion to 2-D. Actually, bilinear interpolationis not linear in the whole process but quadratic in the sample location<em>P</em>, it could be expressed in a bilinear polynomial form: <spanclass="math inline">\(f(x,y)=a_{00}+a_{10}x+a_{01}y+a_{11}xy\)</span>.The basic derivation is by repeat linear interpolation twice. As shownin the figure below, first sample along x-axis:</p><p><span class="math display">\[\begin{equation}\begin{aligned}f(x,y_1) &amp; =\frac{x_2-x}{x_2-x_1}f(Q_1)+\frac{x-x_1}{x_2-x_1}f(Q_2)\\         &amp; =(x_2-x)f(Q_1)+(x-x_1)f(Q_2) \\f(x,y_2) &amp; =\frac{x_2-x}{x_2-x_1}f(Q_3)+\frac{x-x_1}{x_2-x_1}f(Q_4)\\         &amp; =(x_2-x)f(Q_3)+(x-x_1)f(Q_4)\end{aligned}\end{equation}\]</span> Then sample along y-axis (the sequence of sampling along x andy axes can exchange), writing the equation of f(x, y) in matrixform:</p><p><span class="math display">\[\begin{equation}\begin{aligned}f(x,y) &amp;=\frac{y_2-y}{y_2-y_1}f(x,y_1)+\frac{y-y_1}{y_2-y_1}f(x,y_2) \\       &amp;=\frac{y_2-y}{y_2-y_1}[(x_2-x)f(Q_1)+(x-x_1)f(Q_2)]+\frac{y-y_1}{y_2-y_1}[(x_2-x)f(Q_3)+(x-x_1)f(Q_4)]\\       &amp; =\begin{bmatrix}          x_2-x &amp; x-x_1          \end{bmatrix}          \begin{bmatrix}          f(Q_3) &amp; f(Q_1) \\ f(Q_4) &amp; f(Q_2)          \end{bmatrix}          \begin{bmatrix}          y_2-y \\ y-y_1          \end{bmatrix}\end{aligned}\end{equation}\]</span> The points lie in the margin of the <strong>enlarged</strong>figure can be dealt with separately, because it only has 3 or 1 (in thecorner) neighbors. Therefore, I do linear interpolation for the pointsin the margin.</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_figure5.jpeg" height="225"></center><center>fig-4 bilinear interpolation</center><p><strong>Using Polynomial to fit:</strong></p><p>As mentioned above, f(x, y) could be written as a multilinearpolynomial, therefore using the values of the 4 neighbor points, we canget: $$ <span class="math display">\[\begin{align}f(x, y) &amp; \approx a_{00}+a_{10}x+a_{01}y+a_{11}xy \\        &amp; \Rightarrow [f(Q_3) \ f(Q_1) \ f(Q_4) \ f(Q_2)]^T \\        \\\begin{pmatrix}f(Q_3) \\ f(Q_1) \\ f(Q_4) \\ f(Q_2)\end{pmatrix} &amp; =\begin{pmatrix}1 &amp; x_1 &amp; y_1 &amp; x_1y_1 \\1 &amp; x_1 &amp; y_2 &amp; x_1y_2 \\1 &amp; x_2 &amp; y_1 &amp; x_2y_1 \\1 &amp; x_2 &amp; y_2 &amp; x_2y_2 \\\end{pmatrix}\begin{pmatrix}a_{00} \\ a_{10} \\ a_{01} \\ a_{11}\end{pmatrix} \\\\\begin{pmatrix}a_{00} \\ a_{10} \\ a_{01} \\ a_{11}\end{pmatrix} &amp; = \frac{1}{(x_2-x_1)(y_2-y_1)}\begin{pmatrix}x_2y_2 &amp; -x_2y_1 &amp; -x_1y_2 &amp; x_1y_1 \\-y_2 &amp; y_1 &amp; y_2 &amp; -y_1 \\-x_2 &amp; x_2 &amp; x_1 &amp; -x_1 \\1 &amp; -1 &amp; -1 &amp; 1 \\\end{pmatrix}\begin{pmatrix}f(Q_3) \\ f(Q_1) \\ f(Q_4) \\ f(Q_2)\end{pmatrix} \\\\              &amp; =\begin{pmatrix}x_2y_2 &amp; -x_2y_1 &amp; -x_1y_2 &amp; x_1y_1 \\-y_2 &amp; y_1 &amp; y_2 &amp; -y_1 \\-x_2 &amp; x_2 &amp; x_1 &amp; -x_1 \\1 &amp; -1 &amp; -1 &amp; 1 \\\end{pmatrix}\begin{pmatrix}f(Q_3) \\ f(Q_1) \\ f(Q_4) \\ f(Q_2)\end{pmatrix} \\\\f(x,y) &amp; =\begin{pmatrix}1 &amp; x &amp; y &amp; xy\end{pmatrix}\begin{pmatrix}x_2y_2 &amp; -x_2y_1 &amp; -x_1y_2 &amp; x_1y_1 \\-y_2 &amp; y_1 &amp; y_2 &amp; -y_1 \\-x_2 &amp; x_2 &amp; x_1 &amp; -x_1 \\1 &amp; -1 &amp; -1 &amp; 1 \\\end{pmatrix}\begin{pmatrix}f(Q_3) \\ f(Q_1) \\ f(Q_4) \\ f(Q_2)\end{pmatrix} \\\end{align}\]</span> $$ <strong>Using Weighted Mean</strong></p><p>In another view, as mentioned we can see the interpolation asweighted average over the 4 neighbor values, therefore we can a vector<span class="math inline">\(w\)</span> to denote the weights. <spanclass="math display">\[\begin{align}f(x, y) &amp; \approxw_{1}f(Q_{1})+w_{2}f(Q_{2})+w_{3}f(Q_{3})+w_{4}f(Q_{4}) \\        &amp; =\begin{pmatrix}f(Q_3) &amp; f(Q_1) &amp; f(Q_4) &amp; f(Q_2)\end{pmatrix}\begin{pmatrix}w_3 \\ w_1 \\ w_4 \\ w_2\end{pmatrix}\end{align}\]</span> Substitute the knowledge of the former polynomial principle,we can get the following result. The weights must add up to 1 fordifferent order of terms. Then extract the weights by do inversing, weget a new matrix form for bilinear interpolation. <spanclass="math display">\[\begin{align}\begin{pmatrix}1 \\ x \\ y \\ xy\end{pmatrix}&amp; =\begin{pmatrix}1 &amp; 1 &amp; 1 &amp; 1 \\x_1 &amp; x_1 &amp; x_2 &amp; x_2 \\y_1 &amp; y_2 &amp; y_1 &amp; y_2 \\x_1y_1 &amp; x_1y_2 &amp; x_2y_1 &amp; x_2y_2\end{pmatrix}\begin{pmatrix}w_3 \\ w_1 \\ w_4 \\ w_2\end{pmatrix} \\\\f(x,y) &amp; =\begin{pmatrix}f(Q_3) &amp; f(Q_1) &amp; f(Q_4) &amp; f(Q_2)\end{pmatrix}\begin{pmatrix}w_3 \\ w_1 \\ w_4 \\ w_2\end{pmatrix} \\&amp; = \frac{1}{(x_2-x_1)(y_2-y_1)}\begin{pmatrix}f(Q_3) &amp; f(Q_1) &amp; f(Q_4) &amp; f(Q_2)\end{pmatrix}\begin{pmatrix}x_2y_2 &amp; -y_2 &amp; -x_2 &amp; 1 \\-x_2y_1 &amp; y_1 &amp; x_2 &amp; -1 \\-x_1y_2 &amp; y_2 &amp; x_1 &amp; -1 \\x_1y_1 &amp; -y_1 &amp; -x_1 &amp; 1\end{pmatrix}\begin{pmatrix}1 \\ x \\ y \\ xy\end{pmatrix} \\&amp; =\begin{pmatrix}f(Q_3) &amp; f(Q_1) &amp; f(Q_4) &amp; f(Q_2)\end{pmatrix}\begin{pmatrix}x_2y_2 &amp; -y_2 &amp; -x_2 &amp; 1 \\-x_2y_1 &amp; y_1 &amp; x_2 &amp; -1 \\-x_1y_2 &amp; y_2 &amp; x_1 &amp; -1 \\x_1y_1 &amp; -y_1 &amp; -x_1 &amp; 1\end{pmatrix}\begin{pmatrix}1 \\ x \\ y \\ xy\end{pmatrix}\end{align}\]</span> However, it is easy to discover that this matrix form hasstrong similarity with the one derived from polynomial fitting. In myintuition this methods have the same time complexity with the last one,therefore I do not implement this method to codes.</p><h4 id="pseudo-code-1">Pseudo Code</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs pseudocode">// bilinear_11910206<br>begin with parameters input_file, [h_new, w_new]<br><br>    // get input array from filename or just array<br>    error handling<br>    array input_raw<br><br>    // get resize factor, the \alpha mentioned above<br>    float h_fac, w_fac<br>    compute h_fac = h_raw / h_new<br>    compute w_fac = w_raw / w_new<br><br>    // get bias values for center alignment<br>    array interpolated<br>    bias float h_bias, w_bias<br>    compute h_bias = 0.5 * h_fac - 0.5<br>    compute w_bias = 0.5 * w_fac - 0.5<br><br>    // get the indexes that represent margins<br>    integer h_max, w_max, h_margin, w_margin<br>    compute h_max = h_raw - 1<br>    compute w_raw = w_raw - 1<br>    compute h_margin = floor(0.5 / h_fac + 0.5)<br>    compute h_margin = floor(0.5 / w_fac + 0.5)<br><br>    // assign values for the 4 corners<br>    interpolated[left-top] = input_raw[0, 0]<br>    interpolated[right-top] = input_raw[0, w_raw]<br>    interpolated[left-down] = input_raw[h_max, 0]<br>    interpolated[right-down] = input_raw[h_max, w_raw]<br><br>    // assign values for the 4 borderline margins<br>    for index j<br><br>        // handle 2 horizontal borderline margins<br>        float y<br>        integer y1, y2<br>        compute y = w_bias + w_fac * j<br>        compute y1 = floor(y)<br>        compute y2 = ceil(y)<br><br>        // do linear intepolation in y direction<br>        interpolated[left-border] = (y2 - y) * input_raw[0, y1] + (y - y1) * input_raw[0, y2]<br>        interpolated[right-border] = (y2 - y) * input_raw[h_max, y1] + (y - y1) * input_raw[h_max, y2]<br><br>    for index i<br><br>        // handle 2 vertical borderline margins<br>        float x<br>        integer x1, x2<br>        compute x = h_bias + h_fac * i<br>        compute x1 = floor(x)<br>        compute x2 = ceil(x)<br><br>        // do linear intepolation in x direction<br>        interpolated[up-border] = (x2 - x) * input_raw[x1, 0] + (x - x1) * input_raw[x2, 0]<br>        interpolated[down-border] = (x2 - x) * input_raw[x1, w_max] + (x - x1) * input_raw[x2, x_max]<br><br>    // embedded 2 `for` loops to iterate all items in the center part<br>    for index i exclude margin<br>        for index j exclude margin<br>            float x, y<br>            integer x1, y1, x2, y2<br>            compute x = h_bias + h_fac * i<br>            compute y = w_bias + w_fac * j<br>            compute x1 = floor(x)<br>            compute y1 = floor(y)<br>            compute x2 = ceil(x)<br>            compute y2 = ceil(y)<br><br>            update interpolated[i, j]<br>            compute f(x, y) // equations are given above for different methods<br><br>    return interpolated<br>end<br></code></pre></td></tr></table></figure><h3 id="bicubic-interpolation">Bicubic Interpolation</h3><h4 id="derivation-2">Derivation</h4><p>According to the paper in IEEE, I learn this convolution method forbicubic interpolation (there are otherapproaches).<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="Cubic convolution interpolation for digital image processing">[3]</span></a></sup> The strategy is like the polynomial and weightmethod of bilinear interpolation, but this time we have 16 coefficientsrather than 4. The general function is: <span class="math display">\[\sum^{3}_{i=0}\sum^{3}_{j=0}a_{ij}x^iy^j\]</span> The crucial objective is to solve the <spanclass="math inline">\(a_{ij}\)</span> coefficients. The paper introducesa BiCubic function: <span class="math display">\[\begin{align}W(x) &amp; =\left\{\begin{aligned}&amp; (a+2)|x|^3-(a+3)|x|^2 +1 &amp;     &amp; {for \ |x|\leqslant1} \\&amp; a|x|^3-5a|x|^2+8a|x|-4a &amp;     &amp; {for \ 1&lt;|x|&lt;2} \\&amp; 0 &amp;     &amp; {otherwise}\end{aligned}\right. \\a &amp; = -0.5 \ or \ -0.75\end{align}\]</span> Let <span class="math inline">\(0&lt;x&lt;1\)</span>,therefore <span class="math inline">\(1&lt;x+1&lt;2\)</span>, <spanclass="math inline">\(-1&lt;x-1&lt;0\)</span>, <spanclass="math inline">\(-2&lt;x-2&lt;-1\)</span>, then we substitute tothe 4 conditions to <span class="math inline">\(W(x)\)</span>, we couldget corresponding equations. Substitute to the <spanclass="math inline">\(x_1\to x_4\)</span>, and <spanclass="math inline">\(y_1\to y_4\)</span> we get two 1 x 4 vectors <spanclass="math inline">\(\{w_x, w_y\}\)</span>. The final result could be:<span class="math display">\[\begin{align}f(x,y)=\begin{pmatrix}w_{x1} &amp; w_{x2} &amp; w_{x3} &amp; w_{x4}\end{pmatrix}\begin{pmatrix}Q_{11} &amp; Q_{12} &amp; Q_{13} &amp; Q_{14} \\Q_{21} &amp; Q_{22} &amp; Q_{23} &amp; Q_{24} \\Q_{31} &amp; Q_{32} &amp; Q_{33} &amp; Q_{34} \\Q_{41} &amp; Q_{42} &amp; Q_{43} &amp; Q_{44} \\\end{pmatrix}\begin{pmatrix}w_{y1} \\ w_{y2} \\ w_{y3} \\ w_{y4}\end{pmatrix}\end{align}\]</span> Because of time limit, I am still debugging this algorithm...,therefore I use <code>scipy</code> to accomplish it.</p><h4 id="pseudo-code-2">Pseudo Code</h4><p>I implement this by using <code>scipy</code>, according to thereference.<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><spanclass="hint--top hint--rounded" aria-label="scipy.interpolate.interp2d.https://bbs.huaweicloud.com/blogs/329665.">[2]</span></a></sup></p><h2 id="analysis">Analysis</h2><p>Here I import some 3rd-party libraries permitted by teacher, and the<code>xxx_11910206</code> files are solutions of this homework:</p><ol type="1"><li><code>cv2</code>: the python-OpenCV package, used for reading imagesand comparison</li><li><code>numpy</code>: high efficiency calculating tool, written byC/C++ (using CPU)</li><li><code>matplotlib</code>: built-in image processing package, used forshowing visualization of results</li><li><code>xxx_11910206</code>: self implemented algorithms</li><li><code>scipy</code>: contains many scientific math algorithms, likeinterpolation</li></ol><p>I use two other <code>ndarray test</code> and <code>ndarraytest_3</code> for testing my algorithms, the reasons are listed below.Then I set <code>np.random.seed(0)</code> in order to control the resultof random generated tests. The "seed" would help to make the results ofmy <code>ipynb</code> file repeatable:</p><ol type="1"><li>The size of the given image is a square, but my codes supportrectangular input, therefore I would like to use a new test for showingthe generalization capability. Besides, I want to show that myalgorithms can handle RGB images as well.</li><li>The pixel image could better depict the difference of differentalgorithms, it could be helpful for analyzing. The change invisualization is much more obvious. However, I will still use the givenfigure for time complexity testing.</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br><span class="hljs-keyword">from</span> nearest_11910206 <span class="hljs-keyword">import</span> nearest_11910206<br><span class="hljs-keyword">from</span> bilinear_11910206 <span class="hljs-keyword">import</span> bilinear_11910206<br><span class="hljs-keyword">from</span> bicubic_11910206 <span class="hljs-keyword">import</span> bicubic_11910206<br><br>%matplotlib inline<br><br>np.random.seed(<span class="hljs-number">0</span>)  <span class="hljs-comment"># repeatable</span><br>test = np.uint8(np.random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, size=(<span class="hljs-number">5</span>, <span class="hljs-number">7</span>)))<br>test_3 = np.uint8(np.random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,size=(<span class="hljs-number">5</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>)))<br>raw_gray = cv2.cvtColor(cv2.imread(<span class="hljs-string">&#x27;rice.tif&#x27;</span>), cv2.COLOR_BGR2GRAY)<br></code></pre></td></tr></table></figure><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_11910206_3_0.png" alt="png"  /></center><p></p><h3 id="brief-results">Brief Results</h3><p>Here is all the results that required of this homework.</p><p><strong>Nearest Neighbor Interpolation</strong>: According toanalysis and the efficiency test in the last part, this is the fastestalgorithms. The pay-off is that it would occur discontinuity and obviousserration.</p><p><strong>Bilinear Interpolation</strong>: It is more complex thanNearest Neighbor, but it do not have serration for the result grayimage. Basically, the result is smooth and continuous, but this methodwould filter some high-frequency component, thus the image might be alittle faintness.</p><p><strong>Bicubic Interpolation</strong>: The time complexity is thegreatest, but the interpolation effect is the best. It is important tochoose a proper weight policy, exactly choosing an appropriate kernel.The kernel value is usually set to -0.5 or -0.75 (OpenCV set as-0.75).</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_11910206_6_0.png" alt="png" style="zoom:80%;" /></center><h3 id="nearest-neighbor-interpolation-1">Nearest NeighborInterpolation</h3><p>Comparing the result of OpenCV with self-implemented, they are thesame when enlarging. Besides, the result shows that I can applydifferent resized factors in x and y axes.</p><p>During enlarging the figure, nearest neighbor algorithm cannotinterpolate smoothly among the original pixels, the boundaries of colorblocks is significantly clear.</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_11910206_8_0.png" alt="png"  /></center><p>The results of OpenCV and self-implemented algorithms differ whenoperating shrunk, I look through the code of OpenCV and find that ituses <code>cvFloor</code> , which cutoff the integer part of a floatnumber while I use <code>round</code> to get the neighbors, thus thedown-sample result of OpenCV would lean to the left and top sides whilemine is center aligned. The comparison of pixel values are also providedbelow:</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_11910206_9_0.png" alt="png"  /></center><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Raw:</span><br> [[<span class="hljs-number">172</span>  <span class="hljs-number">47</span> <span class="hljs-number">117</span> <span class="hljs-number">192</span>  <span class="hljs-number">67</span> <span class="hljs-number">251</span> <span class="hljs-number">195</span>]<br> [<span class="hljs-number">103</span>   <span class="hljs-number">9</span> <span class="hljs-number">211</span>  <span class="hljs-number">21</span> <span class="hljs-number">242</span>  <span class="hljs-number">36</span>  <span class="hljs-number">87</span>]<br> [ <span class="hljs-number">70</span> <span class="hljs-number">216</span>  <span class="hljs-number">88</span> <span class="hljs-number">140</span>  <span class="hljs-number">58</span> <span class="hljs-number">193</span> <span class="hljs-number">230</span>]<br> [ <span class="hljs-number">39</span>  <span class="hljs-number">87</span> <span class="hljs-number">174</span>  <span class="hljs-number">88</span>  <span class="hljs-number">81</span> <span class="hljs-number">165</span>  <span class="hljs-number">25</span>]<br> [ <span class="hljs-number">77</span>  <span class="hljs-number">72</span>   <span class="hljs-number">9</span> <span class="hljs-number">148</span> <span class="hljs-number">115</span> <span class="hljs-number">208</span> <span class="hljs-number">243</span>]]<br><span class="hljs-attr">OpenCV:</span><br> [[<span class="hljs-number">172</span> <span class="hljs-number">117</span>  <span class="hljs-number">67</span>]<br> [ <span class="hljs-number">70</span>  <span class="hljs-number">88</span>  <span class="hljs-number">58</span>]]<br><span class="hljs-attr">Mine:</span><br> [[  <span class="hljs-number">9</span>  <span class="hljs-number">21</span>  <span class="hljs-number">36</span>]<br> [ <span class="hljs-number">87</span>  <span class="hljs-number">88</span> <span class="hljs-number">165</span>]]<br></code></pre></td></tr></table></figure><p>I extend my codes for RGB images, actually, this is nearly the sameas operating gray images, what's new is to do interpolation separatelyin 3 color channels. I use the following code to judge what shape ofarray should be returned: <code>interpolated = np.zeros(dim, dtype=int)if input_raw.ndim == 2 else np.zeros((dim[0], dim[1], 3),dtype=int)</code>. When updating the returned array<code>interpolated</code>, use the convenient numpy operator<code>:</code> (numpy is much more efficient than raw python codes), theRGB channels could be calculated within one line of code:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> input_raw.ndim == <span class="hljs-number">2</span>:<br>    interpolated[i, j] = input_raw[r_idx, c_idx] <span class="hljs-comment"># calculate gray figure</span><br><span class="hljs-keyword">else</span>:<br>    interpolated[i, j, :] = input_raw[r_idx, c_idx, :] <span class="hljs-comment"># calculate RGB figure</span><br></code></pre></td></tr></table></figure><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_11910206_11_0.png" alt="png"  /></center><h3 id="bilinear-interpolation-1">Bilinear Interpolation</h3><p>Below is to sample the "Random Raw" to 100 x 100, the result issimilar with OpenCV. The figure with title "Self-linear2" uses repeatedlinear interpolation, and the one with "Self-polyfit" uses polynomialfit.</p><p>It also supports RGB figures just like <code>nearest_11910206</code>does. From the results, we could see that bilinear interpolation hasbetter effect than nearest neighbor, it could compensate sometransitional values between the original color blocks.</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_11910206_13_0.png" alt="png"  /></center><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/interpolation_11910206_14_0.png" alt="png" style="zoom:100%;" /></center><p>From the figure above with title "Inverse-Shrunk", it is down-sampledback to 5 x 5 from the image up-sampled to 100 x 100. It reveal that thebilinear process dramatically could be inverse! From wiki, I get thefollowing proof for Inverse computation under special condition (if thepoint is inside any convex quadrilateral, which means 4-border-polygonsthat are convex, the "unit square coordinates" could befound).<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint--rounded" aria-label="Bilinear_interpolation.https://en.wikipedia.org/wiki/Bilinear_interpolation.">[1]</span></a></sup></p><p>The <span class="math inline">\(\{a, b, c, d\}\)</span> could be seenas weights of current interpolation, the unit square are parameterizedby <span class="math inline">\(\{\lambda,\mu\}\in[0, 1]\)</span> . Thetarget is to solve these two parameters. <span class="math display">\[\begin{align}&amp; a + b\lambda+c\mu+d\lambda\mu=0 \\\\&amp; a = x_{00} - x \\&amp; b = x_{10} - x_{00} \\&amp; c = x_{01} - x_{00} \\&amp; d = x_{11} - x_{01} - x_{10} + x_{00} \\\end{align}\]</span> Take 2-d cross product of the system, reveals that: <spanclass="math display">\[\begin{align}&amp; (a+b\lambda+c\mu)\times d &amp; = 0 \\&amp; (a+b\lambda)\times (c+d\mu) &amp; = 0 \\&amp; (a+c\mu)\times (b+d\mu) &amp; = 0 \\&amp; \Rightarrow \\&amp; C+E\lambda+F\mu &amp; = 0 \\&amp; B+(C+D)\lambda +E\lambda^2 &amp; = 0 \\&amp; A+(C-D)\mu+F\mu^2 &amp; = 0 \\\\&amp; with \\&amp; A=a\times b \quad B=a\times c \quad C=a\times d \\&amp; D=b\times c \quad E=b\times d \quad F=c\times d\end{align}\]</span> Use quadratic formula to solve the equations, we get: <spanclass="math display">\[\mathbb{D}=(C+D)^2-4EB=(C-D)^2-4FA \\\Rightarrow \quad \lambda=\frac{-C-D\pm \sqrt{\mathbb{D}}}{2E} \quad\mu=\frac{-C+D\pm \sqrt{\mathbb{D}}}{2F}\]</span> This might explain the dramatic inverse property I found,actually I not sure I totally understand it...</p><h3 id="time-complexity-analysis">Time Complexity Analysis</h3><h4 id="enlarge">Enlarge</h4><p>I use the built-in <code>time</code> package in python to recordrunning time in float seconds, and then use <code>matplotlib</code> toplot them, here shows the results. The time complexity of bilinearinterpolation and nearest neighbor interpolation are both <spanclass="math inline">\(O(N^2)\)</span>, due to the embedded two forloops. Apparently, bilinear cost more time than nearest neighbor,because it does more calculation in the for loops, which also means thatbilinear interpolation has larger coefficient for the 2nd-orderterm.</p><p>Compare the two bilinear methods, it turns out that when interpolatedsize is under 800 they hardly have difference. Therefore, it isreasonable to guess that using repeated linear interpolation andpolynomial fitting occupy similar calculation.</p><p>OpenCV test is weird, I guess it might have down differentoptimization strategies for these 3 methods. By the way, wheninterpolated size is larger than 3000, the time cost of nearest neighbormethod would increase horribly.</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/buffer_time_result_2.png" alt="png" style="zoom:100%;" /></center><h4 id="shrunk">Shrunk</h4><p>The shrunk result is similar with enlarge, a interesting fact is thatshrunk cost much less time than enlarge. This means that the limitationand challenge of interpolation problem is up-sample rather thandown-sample. For example, recovering image and super-resolution taskmight be relevant to this, I guess.</p><p>The OpenCV result is still strange, might relate to its bottomoptimization or it use other methods instead.</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/DIP/buffer_time_result_3.png" alt="png" style="zoom:100%;" /></center><h2 id="reference">Reference</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>Bilinear_interpolation.https://en.wikipedia.org/wiki/Bilinear_interpolation.<a href="#fnref:1" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:2" class="footnote-text"><span>scipy.interpolate.interp2d.https://bbs.huaweicloud.com/blogs/329665.<a href="#fnref:2" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:3" class="footnote-text"><span>Cubic convolutioninterpolation for digital image processing<a href="#fnref:3" rev="footnote" class="footnote-backref"></a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category>DIP</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DIP</tag>
      
      <tag>NumPy</tag>
      
      <tag></tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/02/20/2022-2-20-Origin-and-Develop-of-Male-Gaze/"/>
    <url>/2022/02/20/2022-2-20-Origin-and-Develop-of-Male-Gaze/</url>
    
    <content type="html"><![CDATA[<h2 id=""></h2><p></p><p>Cosplay<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="1PV.https://natalie.mu/comic/news/450709">[1]</span></a></sup>cos<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><spanclass="hint--top hint--rounded"aria-label=".https://zhuanlan.zhihu.com/p/459764846">[4]</span></a></sup></p><blockquote><ol type="1"><li><br></li><li></li><li>[]</li></ol></blockquote><p>cos<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="2020.https://web.archive.org/web/20200131141434/https://hon-hikidashi.jp/enjoy/100863/">[2]</span></a></sup>1<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="21.https://web.archive.org/web/20200217112227/https://hon-hikidashi.jp/enjoy/99008/">[3]</span></a></sup></p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/others/20220220210953.png" width="400"><center> 1</center></center><p></p><h2 id=""></h2><blockquote><p></p></blockquote><p><ahref="https://zhuanlan.zhihu.com/p/267116286"></a>b</p><ol type="1"><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ol>    <div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">        <iframe src="//player.bilibili.com/player.html?aid=98673985&bvid=BV1m7411m7GC&cid=168454692&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe>    </div><p>2</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/others/male_gaze_self_figure.jpeg" width="650"><center> 2</center></center><p></p><ol type="1"><li><strong></strong>hhh</li><li><strong></strong></li></ol><h2 id=""></h2><p></p><ol type="1"><li></li><li></li><li><strong></strong></li></ol><h2 id=""></h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1"class="footnote-text"><span>1PV.https://natalie.mu/comic/news/450709<a href="#fnref:1" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:2"class="footnote-text"><span>2020.https://web.archive.org/web/20200131141434/https://hon-hikidashi.jp/enjoy/100863/<a href="#fnref:2" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:3"class="footnote-text"><span>21.https://web.archive.org/web/20200217112227/https://hon-hikidashi.jp/enjoy/99008/<a href="#fnref:3" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:4"class="footnote-text"><span>.https://zhuanlan.zhihu.com/p/459764846<a href="#fnref:4" rev="footnote" class="footnote-backref"></a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category></category>
      
    </categories>
    
    
    <tags>
      
      <tag></tag>
      
      <tag></tag>
      
      <tag></tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python numpy and matplotlib</title>
    <link href="/2022/02/15/2022-2-15-Python-numpy-and-matplotlib/"/>
    <url>/2022/02/15/2022-2-15-Python-numpy-and-matplotlib/</url>
    
    <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2><p>I adjust this file from the lab tutorial of my DIP course, actually Ihave used python for more than two semesters, this is not the first timefor me to code with python and numpy. So what is the purpose of thisblog? I want to record some details of using <code>numpy</code> and<code>matplotlib</code>, because I sometimes forget some of their usages(like find or remove by index and so on). ~Besides, I would record notesfor <code>pandas</code> as well.~</p><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br></code></pre></td></tr></table></figure><h2 id="numpy">Numpy</h2><p>I refer extensively to <ahref="https://www.numpy.org.cn/en/user/quickstart.html#prerequisites">thissite</a> for reviewing <code>numpy</code>. The reason why<code>numpy</code> is fast and welcome by programmers is because that ituses pre-compiled effective C code and give a convenient vectorizedinterface for users.</p><h3 id="primary">Primary</h3><ul><li>Some basic concepts and attributes of<code>numpy.ndarray</code></li><li>Create numpy arrays for different dimensions</li><li>print arrays</li></ul><h4 id="what-is-numpy.ndarray">What is <code>numpy.ndarray</code></h4><p>NumPys main object is the homogeneous multidimensional array. It isa table of elements(usually numbers), all of the same type, indexed by atuple of non-negative integers. In NumPy dimensions are called axes. Forexample, the coordinates of a point in 3D space [1, 2, 1] has one axis.That axis has 3 elements in it, so we say it has a length of 3. In theexample codes below, the array <code>a</code> has 2 axes. The first axishas a length of 2, the second axis has a length of 3.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.arange(<span class="hljs-number">6</span>).reshape(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(a)<br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[[0 1 2] [3 4 5]]</code></pre></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ndim&#x27;</span>, a.ndim)  <span class="hljs-comment"># count of dimensions (axes)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;shape&#x27;</span>, a.shape)  <span class="hljs-comment"># a tuple of the length of each axes</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;size&#x27;</span>, a.size)  <span class="hljs-comment"># count of all elements</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;dtype&#x27;</span>, a.dtype)  <span class="hljs-comment"># datatype</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">ndim 2shape (2, 3)size 6dtype int64</code></pre></div><h4 id="how-to-create-numpy.ndarray">How to create<code>numpy.ndarray</code></h4><p>They could be created from <em>list, tuple, and built-in usefulfunctions</em>. Besides, user could use <code>np.fromfunction</code> tocustomize an array with a give function. Here are some functionexamples: * array * zeros, ones, empty * zeros_like, ones_like,empty_like * arange, linspace * fromfunction, fromfile *random.random</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])  <span class="hljs-comment"># from list</span><br>b = np.array([(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)])  <span class="hljs-comment"># from tuple</span><br>c = np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># np.arange(start, stop, step)</span><br>d = np.zeros((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>))  <span class="hljs-comment"># create an array of zeros, similar with `c = np.ones((2, 3))`</span><br>e = np.zeros_like(<br>    a)  <span class="hljs-comment"># create an array of zeros with the same shape and type as a given array, similar with `c = np.ones_like((2, 3))`</span><br><span class="hljs-built_in">print</span>(e)<br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[[0 0 0] [0 0 0]]</code></pre></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f1</span>(<span class="hljs-params">arg_x, arg_y</span>):</span>  <span class="hljs-comment"># user customized function</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">10</span> * arg_x + arg_y<br><br><br>f = np.fromfunction(f1, (<span class="hljs-number">5</span>, <span class="hljs-number">4</span>), dtype=<span class="hljs-built_in">int</span>)<br>f<br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">array([[ 0,  1,  2,  3],       [10, 11, 12, 13],       [20, 21, 22, 23],       [30, 31, 32, 33],       [40, 41, 42, 43]])</code></pre></div><h4 id="print-arrays">Print arrays</h4><ul><li>Except for the last axis(printed from left to right), the otherdimensions are all printed from top to down.</li><li>Use <code>set_printoptions</code> could change the settings of<code>print()</code></li><li>Basic operations and universal functions</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># import sys</span><br><span class="hljs-comment"># np.set_printoptions(threshold=sys.maxsize) # is used to print whole arrays (avoid hiding)</span><br>a = np.arange(<span class="hljs-number">24</span>).reshape((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>))<br><span class="hljs-built_in">print</span>(a)<br><span class="hljs-built_in">print</span>(np.arange(<span class="hljs-number">10000</span>).reshape(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>))  <span class="hljs-comment"># print large matrix</span><br>a[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]  <span class="hljs-comment"># visit the last element</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[[[ 0  1  2  3]  [ 4  5  6  7]  [ 8  9 10 11]] [[12 13 14 15]  [16 17 18 19]  [20 21 22 23]]][[   0    1    2 ...   97   98   99] [ 100  101  102 ...  197  198  199] [ 200  201  202 ...  297  298  299] ... [9700 9701 9702 ... 9797 9798 9799] [9800 9801 9802 ... 9897 9898 9899] [9900 9901 9902 ... 9997 9998 9999]]23</code></pre></div><h4 id="operators-and-functions">Operators and functions</h4><ul><li>Support <code>+</code>, <code>-</code>, <code>*</code>,<code>**</code>, <code>+=</code>, <code>*=</code>, and so on, theseoperators all apply on corresponding single elements.</li><li>Note that <code>==</code>, <code>&lt;</code>, and <code>&gt;=</code>also work, it would return an array of bools.</li><li>Dot product is <code>@</code> or <code>arr1.dot(arr2)</code>,multiplication by elements is <code>*</code>.</li><li>Operating with arrays of different types corresponds toupcasting.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.arange(<span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(np.sin(a) ** <span class="hljs-number">0.1</span>)  <span class="hljs-comment"># basic operators</span><br><span class="hljs-built_in">print</span>(a == <span class="hljs-number">2</span>)  <span class="hljs-comment"># return bools</span><br>a.resize(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># reshape() return a new array, resize() adjust the original array</span><br><span class="hljs-built_in">print</span>(a @ a)  <span class="hljs-comment"># dot product</span><br><span class="hljs-built_in">print</span>(a * a)  <span class="hljs-comment"># element multiply</span><br>b = a + <span class="hljs-number">0.1</span> * np.ones(<span class="hljs-number">4</span>).reshape((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)) * <span class="hljs-number">1j</span><br><span class="hljs-built_in">print</span>(b.dtype)  <span class="hljs-comment"># upcasting to &#x27;float64&#x27;</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[0.         0.98288773 0.99053676 0.82216476][False False  True False][[ 2  3] [ 6 11]][[0 1] [4 9]]complex128</code></pre></div><p><strong>Some <code>ufunc</code></strong>: * There are many universalfunctions, like <code>sin</code>, <code>cos</code>, <code>exp</code>,they all apply to <code>ndarray</code> by elements. * The universalfunctions <code>ufunc</code> could apply on certain axes when specifythem. * There are many <ahref="https://numpy.org/devdocs/reference/routines.logic.html">logicfunctions</a>, like some <code>isxxx</code>functions(<code>isinf</code>, <code>isnan</code>, and so on),<code>all</code> and <code>any</code> are also logic functions. *<code>apply_along_axis</code> might be a useful function (?) <ahref="https://numpy.org/devdocs/reference/generated/numpy.apply_along_axis.html#numpy.apply_along_axis">referto this</a> * <code>argmax</code>, <code>argsort</code> is very useful!<ahref="https://numpy.org/devdocs/reference/generated/numpy.argsort.html#numpy.argsort">referto this</a> * Some other <code>ufunc</code> are listed below in thefigure</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">c = np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(c.<span class="hljs-built_in">max</span>(axis=<span class="hljs-number">1</span>))  <span class="hljs-comment"># max of each row</span><br><span class="hljs-built_in">print</span>(c.<span class="hljs-built_in">sum</span>(axis=<span class="hljs-number">0</span>))  <span class="hljs-comment"># sum of each column</span><br><span class="hljs-built_in">print</span>(c.cumsum(axis=<span class="hljs-number">0</span>))  <span class="hljs-comment"># cumulative sum along each column</span><br><span class="hljs-built_in">print</span>(np.<span class="hljs-built_in">all</span>(np.array([-<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]) == np.array([<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])))  <span class="hljs-comment"># logic function `all`</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f2</span>(<span class="hljs-params">arr_arg</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;Average first and last element of a 1-D array&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> (arr_arg[<span class="hljs-number">0</span>] + arr_arg[-<span class="hljs-number">1</span>]) * <span class="hljs-number">0.5</span><br><br><br>d = np.array([[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<br><span class="hljs-built_in">print</span>(d)<br><span class="hljs-built_in">print</span>(np.apply_along_axis(f2, <span class="hljs-number">0</span>, d))  <span class="hljs-comment"># apply along column</span><br><span class="hljs-built_in">print</span>(np.argsort(d, axis=<span class="hljs-number">0</span>))  <span class="hljs-comment"># return the argument of sorted array along columns</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[ 3  7 11][12 15 18 21][[ 0  1  2  3] [ 4  6  8 10] [12 15 18 21]]False[[7 8 9] [1 2 3] [4 5 6]][5.5 6.5 7.5][[1 1 1] [2 2 2] [0 0 0]]</code></pre></div><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/others/20220216231312.png" width="700"></center><h4 id="indexing-and-slicing">Indexing and Slicing</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">5</span>, <span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(a)  <span class="hljs-comment"># original</span><br><span class="hljs-built_in">print</span>(a[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>])  <span class="hljs-comment"># indexing, the sequence of start from axis 0</span><br><span class="hljs-built_in">print</span>(a[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>])  <span class="hljs-comment"># slicing, missing indices are considered complete slices</span><br><span class="hljs-built_in">print</span>(a[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>, -<span class="hljs-number">1</span>])  <span class="hljs-comment"># -1 correspond to the last elements</span><br><span class="hljs-built_in">print</span>(a[-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>:<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>])  <span class="hljs-comment"># the magic form from Dr. Zhang, hahaha~</span><br><span class="hljs-built_in">print</span>(a[..., <span class="hljs-number">0</span>])  <span class="hljs-comment"># &#x27;...&#x27; is an alternative for multiple &#x27;:&#x27;</span><br>a[:<span class="hljs-number">4</span>:<span class="hljs-number">2</span>] = -<span class="hljs-number">1</span>  <span class="hljs-comment"># equivalent to a[0:6:2] = -1; from start to position 4, exclusive, set every 2nd element to -1</span><br><span class="hljs-built_in">print</span>(a)<br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[[ 0  1  2  3] [ 4  5  6  7] [ 8  9 10 11] [12 13 14 15] [16 17 18 19]]4[[ 4  5  6  7] [ 8  9 10 11]][ 7 11][19 18 17][ 0  4  8 12 16][[-1 -1 -1 -1] [ 4  5  6  7] [-1 -1 -1 -1] [12 13 14 15] [16 17 18 19]]</code></pre></div><h3 id="advanced">Advanced</h3><h4 id="change-the-shape-of-arrays">Change the shape of arrays</h4><ul><li><code>a.ravel()</code> return the flattened array, but not changethe array itself</li><li><code>a.reshape()</code> return the reshaped array,<code>a.resize()</code> change the shape of array</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.floor(<span class="hljs-number">10</span> * np.random.random((<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)))  <span class="hljs-comment"># similar with `np.ceil`</span><br><span class="hljs-built_in">print</span>(a)  <span class="hljs-comment"># range from [0, 10)</span><br><span class="hljs-built_in">print</span>(a.ravel())  <span class="hljs-comment"># return the flattened array</span><br><span class="hljs-built_in">print</span>(a.reshape(<span class="hljs-number">2</span>, <span class="hljs-number">6</span>))  <span class="hljs-comment"># return the array with modified shape</span><br><span class="hljs-built_in">print</span>(a.T.shape)  <span class="hljs-comment"># return the transposed array(shape)</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[[0. 4. 8. 8.] [9. 3. 3. 5.] [0. 2. 5. 5.]][0. 4. 8. 8. 9. 3. 3. 5. 0. 2. 5. 5.][[0. 4. 8. 8. 9. 3.] [3. 5. 0. 2. 5. 5.]](4, 3)</code></pre></div><h4 id="stacking-arrays-together">Stacking arrays together</h4><p>Refer to the tutorial <ahref="https://www.numpy.org.cn/user/quickstart.html#%E5%B0%86%E4%B8%8D%E5%90%8C%E6%95%B0%E7%BB%84%E5%A0%86%E5%8F%A0%E5%9C%A8%E4%B8%80%E8%B5%B7">here</a>,besides some concatenate and splitting functions are <ahref="https://numpy.org/devdocs/reference/generated/numpy.concatenate.html#numpy.concatenate">here</a>.* <code>vstack</code> vertical appending * <code>hstack</code>horizontal appending * <code>column_stack</code> and<code>concatenate</code>also are useful * <code>np.c_</code> translatesslice objects to concatenation along the second axis, this is short-handfor <code>np.r_['-1,2,0', index expression]</code>, more about<code>np.r_</code> is <ahref="https://numpy.org/devdocs/reference/generated/numpy.r_.html#numpy.r_">here</a>.The dimension upgrade rule of <code>np.r_</code> can refer to <ahref="https://blog.csdn.net/huhu0769/article/details/52742395">here</a>.* <code>hsplit</code> and <code>vsplit</code> can split arrays</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.ones((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>b = np.zeros((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br><span class="hljs-built_in">print</span>(np.vstack((a, b)))  <span class="hljs-comment"># vertical</span><br><span class="hljs-built_in">print</span>(np.hstack((a, b)))  <span class="hljs-comment"># horizontal</span><br><span class="hljs-built_in">print</span>(np.r_[<span class="hljs-number">2</span>:<span class="hljs-number">5</span>:<span class="hljs-number">5j</span>, <span class="hljs-number">0</span>, [<span class="hljs-number">1</span>] * <span class="hljs-number">2</span>, np.array([<span class="hljs-number">2</span>,<br>                                          <span class="hljs-number">3</span>])])  <span class="hljs-comment"># 5j means using np.linspace(start, stop, step, endpoint=1), if not an imaginary number, using np.arange(start, stop, step)</span><br><span class="hljs-built_in">print</span>(np.r_[<span class="hljs-string">&#x27;0,3,2&#x27;</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])  <span class="hljs-comment"># the last two integers &#x27;3, 1&#x27; are about dimension upgrading</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[[1. 1.] [1. 1.] [0. 0.] [0. 0.]][[1. 1. 0. 0.] [1. 1. 0. 0.]][2.   2.75 3.5  4.25 5.   0.   1.   1.   2.   3.  ][[[1 2 3]] [[4 5 6]]]</code></pre></div><h4 id="copies-and-views">Copies and Views</h4><p>When operating and calculating arrays, sometimes the interpreterwould copy the data into a new array and return it, sometimes not.<strong>Python is an advanced language, therefore usually it operates byreference, not by value(can be checked by <code>id()</code>)</strong>.There are 3 methods of operating <code>ndarray</code>, which are<code>=</code>, <code>view</code> and <code>copy</code>.</p><h5 id="no-copy-at-all">No Copy at All</h5><p><strong>Pass by reference, actually is another name of the originalarray</strong>. This is useful when passing by function parameters, butpython interpreter helps us do this, usually we do not do this.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;No Copy at All&quot;&quot;&quot;</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f3</span>(<span class="hljs-params">arg_arr</span>):</span>  <span class="hljs-comment"># pass by reference</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">id</span>(arg_arr)<br><br><br>a = np.arange(<span class="hljs-number">4</span>)<br>b = a  <span class="hljs-comment"># do assignment &#x27;=&#x27; by reference(just different names)</span><br>b.shape = <span class="hljs-number">2</span>, <span class="hljs-number">2</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a) == f3(a))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a) == <span class="hljs-built_in">id</span>(b))<br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">TrueTrue</code></pre></div><h5 id="view-or-shallow-copy">View or Shallow Copy</h5><p><strong>This is like the feature of ROI in CV and matrixoperation</strong>. This is useful when the matrix data do not need tochange when operating. For example, extracting kernel is this kind ofoperation, slicing itself also returns a <em>view</em>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">c = a.view()  <span class="hljs-comment"># `view` create a new array object share the same data</span><br><span class="hljs-built_in">print</span>(c <span class="hljs-keyword">is</span> a)<br><span class="hljs-built_in">print</span>(c.base <span class="hljs-keyword">is</span> a)<br>c.shape = <span class="hljs-number">4</span>, <span class="hljs-number">1</span>  <span class="hljs-comment"># c&#x27;s property could be changed</span><br><span class="hljs-built_in">print</span>(a.shape)  <span class="hljs-comment"># a&#x27;s data do not change</span><br><span class="hljs-built_in">print</span>(c.shape)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a) == <span class="hljs-built_in">id</span>(c))  <span class="hljs-comment"># this is reference, is shallow copy(like ROI)</span><br>a *= <span class="hljs-number">2</span><br><span class="hljs-built_in">print</span>(a)  <span class="hljs-comment"># a and c both change</span><br><span class="hljs-keyword">del</span> a  <span class="hljs-comment"># this is like the principle of reference count</span><br><span class="hljs-built_in">print</span>(c)  <span class="hljs-comment"># c still work</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">FalseTrue(2, 2)(4, 1)False[[0 2] [4 6]][[0] [2] [4] [6]]</code></pre></div><h5 id="deep-copy">Deep Copy</h5><p><strong>This creat a full copy of the original data</strong>.Sometimes copy should be called after slicing if the original array isnot required anymore. For example, suppose a is a huge intermediateresult and the final result b only contains a small fraction of a, adeep copy should be made when constructing b with slicing.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">d = c.copy()  <span class="hljs-comment"># a new array object with new data is created</span><br><span class="hljs-built_in">print</span>(d.base <span class="hljs-keyword">is</span> c)  <span class="hljs-comment"># d doesn&#x27;t share anything with a</span><br><br>a = np.arange(<span class="hljs-built_in">int</span>(<span class="hljs-number">1e8</span>))  <span class="hljs-comment"># very large array</span><br>b = a[:<span class="hljs-number">100</span>].copy()  <span class="hljs-comment"># create a copy and delete</span><br><span class="hljs-keyword">del</span> a  <span class="hljs-comment"># the memory of ``a`` can be released.</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">False</code></pre></div><h4 id="common-function-api">Common Function API</h4><p>refer to <ahref="https://www.numpy.org.cn/reference/routines/">here</a></p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/others/20220218211635.png" width="700"></center><h4 id="broadcasting">Broadcasting</h4><p>refer to <ahref="https://www.numpy.org.cn/user/basics/broadcasting.html#%E4%B8%80%E8%88%AC%E5%B9%BF%E6%92%AD%E8%A7%84%E5%88%99">here</a>,below is one example:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.array([<span class="hljs-number">0.0</span>, <span class="hljs-number">10.0</span>, <span class="hljs-number">20.0</span>, <span class="hljs-number">30.0</span>])<br>b = np.array([<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>])<br><span class="hljs-built_in">print</span>(a[:, np.newaxis] + b)  <span class="hljs-comment"># `newaxis` insert a new axis, so a become a 4x1 array</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[[ 1.  2.  3.] [11. 12. 13.] [21. 22. 23.] [31. 32. 33.]]</code></pre></div><h4 id="more-about-indexing">More about indexing</h4><p>refer to <ahref="https://www.numpy.org.cn/user/quickstart.html#%E8%8A%B1%E5%BC%8F%E7%B4%A2%E5%BC%95%E5%92%8C%E7%B4%A2%E5%BC%95%E6%8A%80%E5%B7%A7">here</a></p><h5 id="indexing-with-arrays-of-indices">Indexing with Arrays ofIndices</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(a)<br>i = np.array([[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>],<br>              [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]])  <span class="hljs-comment"># indices for the first dim of a</span><br>j = np.array([[<span class="hljs-number">2</span>, <span class="hljs-number">1</span>],<br>              [<span class="hljs-number">3</span>, <span class="hljs-number">3</span>]])  <span class="hljs-comment"># indices for the second dim</span><br><span class="hljs-built_in">print</span>(a[i,j])<br>l = (i, j) <span class="hljs-comment"># another way is using a tuple for indexing</span><br><span class="hljs-built_in">print</span>(a[l]) <span class="hljs-comment"># result is the same</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[[ 0  1  2  3] [ 4  5  6  7] [ 8  9 10 11]][[ 2  5] [ 7 11]][[ 2  5] [ 7 11]]</code></pre></div><ul><li>Another usage example is about <code>argmax</code>, which is also inthe tutorial.</li><li>Use array indices to allocate data is also a good usage.</li></ul><h5 id="indexing-with-boolean-arrays">Indexing with Boolean Arrays</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(a[a &gt; <span class="hljs-number">4</span>]) <span class="hljs-comment"># 1d array with the selected elements</span><br></code></pre></td></tr></table></figure><div class="code-wrapper"><pre><code class="hljs">[ 5  6  7  8  9 10 11]</code></pre></div><h5 id="ix_-function">ix_() function</h5><p>refer to <ahref="https://www.numpy.org.cn/user/quickstart.html#ix-%E5%87%BD%E6%95%B0">here</a>,it is useful when doing some array operation (?)</p><h2 id="matplotlib">Matplotlib</h2><h3 id="magic-in-jupyter">Magic in jupyter</h3><p>I refer to <ahref="https://scipy-lectures.org/intro/matplotlib/index.html">thissite</a> for learning <code>Matplotlib</code>. There are some magic inJupyter Notebook, like <code>%matplotlib inline</code>, to let user workwith <code>matplotlib</code> interactively. Use the below code could setwhich figure formats are enabled(more refer to <ahref="https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-matplotlib">this</a>):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> set_matplotlib_formats<br>set_matplotlib_formats(<span class="hljs-string">&#x27;pdf&#x27;</span>, <span class="hljs-string">&#x27;svg&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="using-pyplot">Using <code>pyplot</code></h3><p><code>from matplotlib import pyplot as plt</code> or <code>importmatplotlib.pyplot as plt</code> might be the first python code in yourstudy. The majority of plotting commands in <code>pyplot</code> haveMatlab analogs with similar arguments. Important commands are explainedwith interactive examples.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br><span class="hljs-comment"># Create a figure of size 8x6 inches, 80 dots per inch</span><br>plt.figure(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">6</span>), dpi=<span class="hljs-number">80</span>)<br>    <br><span class="hljs-comment"># Create a new subplot from a grid of 1x1</span><br>plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br><br>X = np.linspace(-np.pi, np.pi, <span class="hljs-number">256</span>)<br>C, S = np.cos(X), np.sin(X)<br><br><span class="hljs-comment"># Plot cosine with a blue continuous line of width 1 (pixels)</span><br>plt.plot(X, C, color=<span class="hljs-string">&quot;blue&quot;</span>, linewidth=<span class="hljs-number">1.0</span>, linestyle=<span class="hljs-string">&quot;-&quot;</span>, label=<span class="hljs-string">&quot;cosine&quot;</span>)<br><br><span class="hljs-comment"># Plot sine with a green continuous line of width 1 (pixels)</span><br>plt.plot(X, S, color=<span class="hljs-string">&quot;green&quot;</span>, linewidth=<span class="hljs-number">1.0</span>, linestyle=<span class="hljs-string">&quot;-&quot;</span>, label=<span class="hljs-string">&quot;sine&quot;</span>)<br><br><span class="hljs-comment"># Set x limits</span><br>plt.xlim(-<span class="hljs-number">4.0</span>, <span class="hljs-number">4.0</span>)<br><br><span class="hljs-comment"># Set x ticks</span><br>plt.xticks(np.linspace(-<span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>))<br><br><span class="hljs-comment"># Set y limits</span><br>plt.ylim(-<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>)<br><br><span class="hljs-comment"># Set y ticks</span><br>plt.yticks(np.linspace(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>))<br><br><span class="hljs-comment"># Save figure using 72 dots per inch</span><br><span class="hljs-comment"># plt.savefig(&quot;exercise_2.png&quot;, dpi=72)</span><br><br>plt.legend(loc=<span class="hljs-string">&#x27;upper left&#x27;</span>)<br><br><span class="hljs-comment"># Show result on screen</span><br>plt.show()<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">ax = plt.gca()  <span class="hljs-comment"># gca stands for &#x27;get current axis&#x27;</span><br>ax.spines[<span class="hljs-string">&#x27;right&#x27;</span>].set_color(<span class="hljs-string">&#x27;none&#x27;</span>)<br>ax.spines[<span class="hljs-string">&#x27;top&#x27;</span>].set_color(<span class="hljs-string">&#x27;none&#x27;</span>)<br>ax.xaxis.set_ticks_position(<span class="hljs-string">&#x27;bottom&#x27;</span>)<br>ax.spines[<span class="hljs-string">&#x27;bottom&#x27;</span>].set_position((<span class="hljs-string">&#x27;data&#x27;</span>,<span class="hljs-number">0</span>))<br>ax.yaxis.set_ticks_position(<span class="hljs-string">&#x27;left&#x27;</span>)<br>ax.spines[<span class="hljs-string">&#x27;left&#x27;</span>].set_position((<span class="hljs-string">&#x27;data&#x27;</span>,<span class="hljs-number">0</span>))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">t = <span class="hljs-number">2</span> * np.pi / <span class="hljs-number">3</span><br>plt.plot([t, t], [<span class="hljs-number">0</span>, np.cos(t)], color=<span class="hljs-string">&#x27;blue&#x27;</span>, linewidth=<span class="hljs-number">2.5</span>, linestyle=<span class="hljs-string">&quot;--&quot;</span>)<br>plt.scatter([t, ], [np.cos(t), ], <span class="hljs-number">50</span>, color=<span class="hljs-string">&#x27;blue&#x27;</span>)<br><br>plt.annotate(<span class="hljs-string">r&#x27;$cos(\frac&#123;2\pi&#125;&#123;3&#125;)=-\frac&#123;1&#125;&#123;2&#125;$&#x27;</span>,<br>             xy=(t, np.cos(t)), xycoords=<span class="hljs-string">&#x27;data&#x27;</span>,<br>             xytext=(-<span class="hljs-number">90</span>, -<span class="hljs-number">50</span>), textcoords=<span class="hljs-string">&#x27;offset points&#x27;</span>, fontsize=<span class="hljs-number">16</span>,<br>             arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">&quot;-&gt;&quot;</span>, connectionstyle=<span class="hljs-string">&quot;arc3,rad=.2&quot;</span>))<br><br>plt.plot([t, t],[<span class="hljs-number">0</span>, np.sin(t)], color=<span class="hljs-string">&#x27;red&#x27;</span>, linewidth=<span class="hljs-number">2.5</span>, linestyle=<span class="hljs-string">&quot;--&quot;</span>)<br>plt.scatter([t, ],[np.sin(t), ], <span class="hljs-number">50</span>, color=<span class="hljs-string">&#x27;red&#x27;</span>)<br><br>plt.annotate(<span class="hljs-string">r&#x27;$sin(\frac&#123;2\pi&#125;&#123;3&#125;)=\frac&#123;\sqrt&#123;3&#125;&#125;&#123;2&#125;$&#x27;</span>,<br>             xy=(t, np.sin(t)), xycoords=<span class="hljs-string">&#x27;data&#x27;</span>,<br>             xytext=(+<span class="hljs-number">10</span>, +<span class="hljs-number">30</span>), textcoords=<span class="hljs-string">&#x27;offset points&#x27;</span>, fontsize=<span class="hljs-number">16</span>,<br>             arrowprops=<span class="hljs-built_in">dict</span>(arrowstyle=<span class="hljs-string">&quot;-&gt;&quot;</span>, connectionstyle=<span class="hljs-string">&quot;arc3,rad=.2&quot;</span>))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> label <span class="hljs-keyword">in</span> ax.get_xticklabels() + ax.get_yticklabels():<br>    label.set_fontsize(<span class="hljs-number">16</span>)<br>    label.set_bbox(<span class="hljs-built_in">dict</span>(facecolor=<span class="hljs-string">&#x27;white&#x27;</span>, edgecolor=<span class="hljs-string">&#x27;None&#x27;</span>, alpha=<span class="hljs-number">0.65</span>))<br></code></pre></td></tr></table></figure><table border="0" class="docutils"><colgroup><col width="17%" /><col width="28%" /><col width="54%" /></colgroup><thead valign="bottom"><tr class="row-odd"><th class="head">Argument</th><th class="head">Default</th><th class="head">Description</th></tr></thead><tbody valign="top"><tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">num</span></code></td><td><code class="docutils literal notranslate"><span class="pre">1</span></code></td><td>number of figure</td></tr><tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">figsize</span></code></td><td><code class="docutils literal notranslate"><span class="pre">figure.figsize</span></code></td><td>figure size in inches (width, height)</td></tr><tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">dpi</span></code></td><td><code class="docutils literal notranslate"><span class="pre">figure.dpi</span></code></td><td>resolution in dots per inch</td></tr><tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">facecolor</span></code></td><td><code class="docutils literal notranslate"><span class="pre">figure.facecolor</span></code></td><td>color of the drawing background</td></tr><tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">edgecolor</span></code></td><td><code class="docutils literal notranslate"><span class="pre">figure.edgecolor</span></code></td><td>color of edge around the drawing background</td></tr><tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">frameon</span></code></td><td><code class="docutils literal notranslate"><span class="pre">True</span></code></td><td>draw figure frame or not</td></tr></tbody></table><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/python/sphx_glr_plot_linestyles_001.png" height="250"></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/python/20220221145220.png" height="250"></div></div></div>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category></category>
      
      <category>DIP</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DIP</tag>
      
      <tag>NumPy</tag>
      
      <tag>Matplotlib</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Note of Modern Control 2021</title>
    <link href="/2022/02/14/2022-2-14-Note-Of-Modern-Control-2021/"/>
    <url>/2022/02/14/2022-2-14-Note-Of-Modern-Control-2021/</url>
    
    <content type="html"><![CDATA[<h2 id="course">Course</h2><p>bModernControlKalmanFilterDynamicProgrammingMPC<em>github</em></p><ul><li><ahref="https://space.bilibili.com/474380277?from=search&amp;seid=9415905800355105743&amp;spm_id_from=333.337.0.0">CLEAR_LAB</a></li><li><ahref="https://space.bilibili.com/474380277/channel/collectiondetail?sid=111390">ME424</a></li></ul><h2 id="note">Note</h2><p>Notesize<ahref="https://github.com/Judera9/Pictures-for-Blogs/tree/main/file/NoteOfModernControl.pdf"></a></p><div class="row">    <embed src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main/file/-content.pdf" width="100%" height="550" type="application/pdf"></div><div class="row">    <embed src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main/file/-part1.pdf" width="100%" height="550" type="application/pdf"></div><div class="row">    <embed src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main/file/-part2.pdf" width="100%" height="550" type="application/pdf"></div><div class="row">    <embed src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main/file/-part3.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
    <categories>
      
      <category></category>
      
    </categories>
    
    
    <tags>
      
      <tag>b</tag>
      
      <tag></tag>
      
      <tag>Python</tag>
      
      <tag></tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Anaconda in PyCharm</title>
    <link href="/2022/02/13/2022-2-13-Anaconda-in-PyCharm/"/>
    <url>/2022/02/13/2022-2-13-Anaconda-in-PyCharm/</url>
    
    <content type="html"><![CDATA[<h2 id="what-is-anaconda">What is Anaconda</h2><p>Anaconda is a powerful package management tool, it solves someweakness when using python. For example, the inconvenience of switchingamong different versions of python interpreters and many site-packages.It is similar to the function of <code>pip</code> and <code>pip3</code>,but it is more powerful.</p><h2 id="install-anaconda">Install Anaconda</h2><p>Follow the instruction in  <ahref="https://anaconda.org.cn/anaconda/install/linux/">Linux </a>,which supports chinese. First, you would be asked to download somedependence by the following code (my OS is Ubuntu20.04):</p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">sudo apt-get install libgl1-mesa-glx libegl1-mesa libxrandr2 libxrandr2 libxss1 libxcursor1 libxcomposite1 libasound2 libxi6 libxtst6<br></code></pre></td></tr></table></figure><p>Then you would get a <code>.sh</code> file, give it executablepermission. Run the <code>.sh</code> file to install Anaconda just likein Windows. Press <code>Enter</code> all through the progress, youbetter install Anaconda in the default location, which is under the<code>/home/</code> directory. Mention that do not put it under<code>/usr</code>, the official site give a warning about this!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">chmod +x filename.sh<br>./Anaconda3-2021.11-Linux-x86_64.sh <br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">Anaconda3 will now be installed into this location:<br>/home/name/anaconda3<br><br>  - Press ENTER to confirm the location<br>  - Press CTRL-C to abort the installation<br>  - Or specify a different location below<br><br>[/home/name/anaconda3] &gt;&gt;&gt; <br></code></pre></td></tr></table></figure><p>After that you would be asked to init the environment, which isactually adjusting the <code>.bashrc</code> file, like using<code>source &lt;path to conda&gt;/bin/activateconda init</code>. Afterall the steps, you would get a respond "Thank you for installingAnaconda3!"</p><h2 id="anaconda-navigator">Anaconda-navigator</h2><p>Anaconda-navigator is a GUI application provided by Anaconda, youcould use it to manage virtual environments without using terminal.Switch to the "Environments" Tab, choose the env that you areinteresting. There are 5 types of selections: <em>Installed, Notinstalled, Updatable, Selected, All</em>. If you want to install a newpackage, one method is to choose <em>Not installed</em>, and then searchthe package you want and download it.</p><h2 id="config-pycharm">Config PyCharm</h2><p>If you haven't got PyCharm, go to <ahref="https://www.anaconda.com/pycharm">this link</a> to download it!Then in the <em>New Project</em> page, choose Conda to manage the newenvironment.</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/others/20220213232131.png" width="600"></center><p>In the <em>Settings</em> Tab, you could add and remove packages.</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/others/20220213235222.png" width="600"></center>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category></category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>PyCharm</tag>
      
      <tag>Anaconda</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/02/12/2022-2-12-Music-Chord/"/>
    <url>/2022/02/12/2022-2-12-Music-Chord/</url>
    
    <content type="html"><![CDATA[<h2 id=""></h2><p></p><table><thead><tr class="header"><th style="text-align: center;"></th><th style="text-align: center;"></th><th style="text-align: center;"></th><th style="text-align: center;"></th></tr></thead><tbody><tr class="odd"><td style="text-align: center;"></td><td style="text-align: center;">C</td><td style="text-align: center;"></td><td style="text-align: center;">CM7</td></tr><tr class="even"><td style="text-align: center;"></td><td style="text-align: center;">Cm</td><td style="text-align: center;"></td><td style="text-align: center;">Cm7</td></tr><tr class="odd"><td style="text-align: center;"></td><td style="text-align: center;">Csus</td><td style="text-align: center;"></td><td style="text-align: center;">C7</td></tr><tr class="even"><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;">C7</td></tr><tr class="odd"><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;">Co7</td></tr></tbody></table><h3 id="-major"> Major</h3><ul><li><strong></strong>CEG+=<strong>CmajCMCC</strong></li><li><strong></strong>CEGB+=<strong>Cmaj7CM7C7</strong>C7</li></ul><h3 id="-minor"> Minor</h3><ul><li><strong></strong>ACE+=<strong>AminAmA-</strong></li><li><strong></strong>ACEG+=<strong>Amin7Am7A-7</strong></li></ul><h3 id="-diminish"> Diminish</h3><ul><li><strong></strong>BDF+=<strong>BdimBo</strong></li><li><strong></strong>BDFA+=<strong>Bdim7Bo7</strong></li></ul><h3 id="-augmented"> Augmented</h3><ul><li><strong></strong>CEG+=<strong>Caug</strong></li></ul><h3 id="-dominant-7th"> Dominant 7th</h3><ul><li><strong></strong>CEGB+=<strong>C7</strong></li><li>GBDF+=<strong>G7</strong></li></ul><h3 id="-half-diminished-7th"> Half Diminished7th</h3><ul><li><strong></strong>BDFA+=<strong>Bm7b5Bm7-5B7</strong>Bm7b5BG5Xm-5</li></ul><h3 id="sus">SUS</h3><ul><li><strong></strong>CCEG<strong>Csus2CDG32</strong><strong>Csus4CFG34</strong><strong>Xsus</strong></li></ul><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220213000058.png" width="650"><center> 1</center></center><h2 id=""></h2><ul><li><strong></strong></li><li><strong></strong><strong></strong></li><li><strong></strong><strong>&gt;  &gt;  &gt;</strong>2</li></ul><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220213104608.png" width="500"><center> 2</center></center><h2 id="leading-bass">Leading Bass</h2><p>LeadingBass</p><p><strong>LeadingBaseCBAGFEDG</strong>CC- G/B - Am - C/G - F - C/E - Dm - G730%LeadingBase</p>    <div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">        <iframe src="//player.bilibili.com/player.html?aid=14452311&bvid=BV14x411s7KZ&cid=335407887&page=28" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe>    </div><p><strong>II-V-I</strong>LeadingBaseII-V-ICDGC<strong>II-V-I--VIVII</strong></p><h2 id=""></h2><p>30%CF- G/F - Em - Am - Dm - G7 - C -C7IIV3</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220213124411.png" width="550"><center> 3</center></center>    <div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">        <iframe src="//player.bilibili.com/player.html?aid=14452311&bvid=BV14x411s7KZ&cid=335408040&page=29" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe>    </div><h2 id="leading-base">Leading Base</h2><p>5%II-V-I--<strong>LeadingBaseAABCDEFGAII-V-IBDFG-EGBD-ACEGFGBDFG-EGBD-ACEG</strong>**</p><blockquote><p>+LeadingBase</p></blockquote><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220213181143.png" width="600"><center> 4</center></center><p><strong></strong></p>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category></category>
      
    </categories>
    
    
    <tags>
      
      <tag></tag>
      
      <tag>b</tag>
      
      <tag></tag>
      
      <tag></tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>STLIterator</title>
    <link href="/2022/02/12/2022-2-12-Cpp-Iterator/"/>
    <url>/2022/02/12/2022-2-12-Cpp-Iterator/</url>
    
    <content type="html"><![CDATA[<h2 id="stl">STL</h2><p>STLSTLContainerAlgorithmIteratorFunctionobjectAdaptorallocator<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://www.cnblogs.com/welen/articles/3533008.html">[1]</span></a></sup></p><h3 id="-container"> Container</h3><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td valign="center" width="170"><center><p></p></center></td><td valign="center" width="700"><center><p></p></center></td><td valign="center" width="130"><center><p></p></center></td></tr><tr><td valign="center" width="170"><center><p>vector</p></center></td><td valign="center" width="700"><p>&emsp;&emsp;</span></p></td><td valign="center" width="130"><center><p>&lt;vector&gt;</p></center></td></tr><tr><td valign="center" width="170"><center><p>deque</p></center></td><td valign="center" width="700"><p>&emsp;&emsp;</span></span></p></td><td valign="center" width="130"><center><p>&lt;deque&gt;</p></center></td></tr><tr><td valign="center" width="170"><center><p>list</p></center></td><td valign="center" width="700"><p>&emsp;&emsp;</span></p></td><td valign="center" width="130"><center><p>&lt;list&gt;</p></center></td></tr><tr><td valign="center" width="170"><center><p>queue</p></center></td><td valign="center" width="700"><p>&emsp;&emsp;</span></p></td><td valign="center" width="130"><center><p>&lt;queue&gt;</p></center></td></tr><tr><td valign="center" width="170"><center><p>stack</p></center></td><td valign="center" width="700"><p>&emsp;&emsp;</span></p></td><td valign="center" width="130"><center><p>&lt;stack&gt;</p></center></td></tr><tr><td valign="center" width="170"><center><p>set</p></center></td><td valign="center" width="700"><p>&emsp;&emsp;</span></p></td><td valign="center" width="130"><center><p>&lt;set&gt;</p></center></td></tr><tr><td valign="center" width="170"><center><p>multiset</p></center></td><td valign="center" width="700"><p>&emsp;&emsp;</span></p></td><td valign="center" width="130"><center><p>&lt;set&gt;</p></center></td></tr><tr><td valign="center" width="170"><center><p>map</p></center></td><td valign="center" width="700"><p>&emsp;&emsp;{}</span></p></td><td valign="center" width="130"><center><p>&lt;map&gt;</p></center></td></tr><tr><td valign="center" width="170"><center><p>multimap</p></center></td><td valign="center" width="700"><p>&emsp;&emsp;</span></p></td><td valign="center" width="130"><center><p>&lt;map&gt;</p></center></td></tr></tbody></table><h3 id="-algorithm"> Algorithm</h3><p><code>&lt;algorithm&gt;</code><code>&lt;numeric&gt;</code><code>&lt;functional&gt;</code><code>&lt;algorithm&gt;</code>STL<code>&lt;numeric&gt;</code><code>&lt;functional&gt;</code><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://www.cnblogs.com/welen/articles/3533008.html">[1]</span></a></sup></p><h3 id="-iterator"> Iterator</h3><p><code>&lt;itertator&gt;</code>stack  queueIterator<code>++p</code><code>p++</code><code>*p</code><code>==</code><code>!=</code>Iteratorconstvoid*<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="http://c.biancheng.net/view/6675.html">[3]</span></a></sup></p><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td colspan="3" valign="center"><p align="center"></p></center></td></tr><tr><td valign="center" width="350"><p> Input iterator</p></td><td valign="center" width="350"><center><p>Reads forward</p></center></td><td valign="center" width="300"><center><p>istream</p></center></td></tr><tr><td valign="center" width="350"><p> Output iterator</p></td><td valign="center" width="350"><center><p>Writes forward</p></center></td><td valign="center" width="300"><center><p>ostream, inserter</p></center></td></tr><tr><td valign="center" width="350"><p> Forward iterator</p></td><td valign="center" width="350"><center><p>Read and Writes forward</p></center></td><td valign="center" width="300"><center><p></p></center></td></tr><tr><td valign="center" width="350"><p> Bidirectional iterator</p></td><td valign="center" width="350"><center><p>Read and Writes forward and backward</span></p></center></td><td valign="center" width="300"><center><p>list, set, multiset, map, mul, timap</span></p></center></td></tr><tr><td valign="center" width="350"><p> Random access iterator</p></td><td valign="center" width="350"><center><p>Read and Write with random access</p></center></td><td valign="center" width="300"><center><p>vector, deque, array, string</p></center></td></tr></tbody></table><figure class="highlight cpp"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// Iterator</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    vector&lt;<span class="hljs-keyword">int</span>&gt; v&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>&#125;;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; v.<span class="hljs-built_in">size</span>(); ++i) <span class="hljs-comment">// use for loop to iterate</span><br>        cout &lt;&lt; v[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    cout &lt;&lt; endl;<br><br>    vector&lt;<span class="hljs-keyword">int</span>&gt;::iterator i; <span class="hljs-comment">// declare iterator</span><br>    <span class="hljs-keyword">for</span> (i = v.<span class="hljs-built_in">begin</span>(); i != v.<span class="hljs-built_in">end</span>(); ++i) <span class="hljs-comment">// use `i &lt; v.end()` is also fine</span><br>        cout &lt;&lt; *i &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="-functor"> Functor</h3><p>(functor)functionobject()structclassCC++<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://blog.csdn.net/K346K346/article/details/82818801">[2]</span></a></sup></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// C</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">/* Callback function */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compare_ints_function</span><span class="hljs-params">(<span class="hljs-keyword">void</span>* A, <span class="hljs-keyword">void</span>* B)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> *((<span class="hljs-keyword">int</span>*)(A)) &lt; *((<span class="hljs-keyword">int</span>*)(B));<br>&#125;<br><br><span class="hljs-comment">/* Declaration of C sorting function */</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(<span class="hljs-keyword">void</span>* first_item, <span class="hljs-keyword">size_t</span> item_size, <span class="hljs-keyword">void</span>* last_item, <span class="hljs-keyword">int</span>(*cmpfunc)(<span class="hljs-keyword">void</span>*, <span class="hljs-keyword">void</span>*))</span></span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> items[]=&#123;<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;;<br>    sort((<span class="hljs-keyword">void</span>*)(items), <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>), (<span class="hljs-keyword">void</span>*)(items +<span class="hljs-number">3</span>), compare_ints_function);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// C++</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IsGreaterThanThresholdFunctor</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">IsGreaterThanThresholdFunctor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> t)</span> : threshold(t) &#123;</span>&#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-comment">// design</span><br>        <span class="hljs-keyword">return</span> num &gt; threshold;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> threshold; <span class="hljs-comment">// </span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">RecallFunc</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *start, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> *end, IsGreaterThanThresholdFunctor myFunctor)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> *i = start; i != end + <span class="hljs-number">1</span>; i++) &#123;<br>        count = <span class="hljs-built_in">myFunctor</span>(*i) ? count + <span class="hljs-number">1</span> : count; <span class="hljs-comment">// operator()</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> count;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> a[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">10</span>, <span class="hljs-number">100</span>, <span class="hljs-number">11</span>, <span class="hljs-number">5</span>, <span class="hljs-number">19</span>&#125;;<br>    <span class="hljs-keyword">int</span> result = <span class="hljs-built_in">RecallFunc</span>(a, a + <span class="hljs-number">4</span>, <span class="hljs-built_in">IsGreaterThanThresholdFunctor</span>(<span class="hljs-number">10</span>));<br>    cout &lt;&lt; result &lt;&lt; endl; <span class="hljs-comment">// 3</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="-adaptor--allocator"> Adaptor &amp; Allocator</h3><p>STLSTL3</p><ul><li><p><strong></strong>stack(queue)(priority_queue)stackvector,dequeue,liststackvctor,dequeliststackqueuepriority_queue</p></li><li><p><strong></strong>STL</p></li><li><p><strong></strong>""</p></li></ul><p>STLSTLSGI-STL2cmallocfreeSGI-STL<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://www.cnblogs.com/welen/articles/3533008.html">[1]</span></a></sup></p><h2 id="iterator">Iterator</h2><h3 id=""></h3><p><code>A(i++);</code><code>A(i)</code><code>i++;</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>;<br>    cout &lt;&lt; i++ &lt;&lt; endl; <span class="hljs-comment">// 1</span><br>    cout &lt;&lt; ++i &lt;&lt; endl; <span class="hljs-comment">// 3</span><br></code></pre></td></tr></table></figure><h3 id=""></h3><p><ahref="https://blog.csdn.net/u010318270/article/details/78575371?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_default&amp;utm_relevant_index=2">Reference</a><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://blog.csdn.net/u010318270/article/details/78575371?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_default&amp;utm_relevant_index=2">[4]</span></a></sup></p><ul><li>C++<strong>eraseiteratoreraseiterator</strong></li><li>vectordequeiteratoriteratorvectordequeeraseiterator</li><li>mapsetmultimapmultisetiteratoriteratoreraseiteratormap</li><li>listeraseiteratorlistiteratoriteratoreraseiterator</li><li>erase<strong>STL</strong></li></ul><h2 id="reference">Reference</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1"class="footnote-text"><span>https://www.cnblogs.com/welen/articles/3533008.html<a href="#fnref:1" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:2"class="footnote-text"><span>https://blog.csdn.net/K346K346/article/details/82818801<a href="#fnref:2" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:3"class="footnote-text"><span>http://c.biancheng.net/view/6675.html<a href="#fnref:3" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:4"class="footnote-text"><span>https://blog.csdn.net/u010318270/article/details/78575371?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_default&amp;utm_relevant_index=2<a href="#fnref:4" rev="footnote" class="footnote-backref"></a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category></category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>Iterator</tag>
      
      <tag>STL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pico | MicroPython</title>
    <link href="/2022/02/12/2022-2-12-Introduction-to-Pico-MicroPython-Plugin-Of-Pycharm/"/>
    <url>/2022/02/12/2022-2-12-Introduction-to-Pico-MicroPython-Plugin-Of-Pycharm/</url>
    
    <content type="html"><![CDATA[<h2 id="raspberry-pico">Raspberry Pico</h2><p><a href="https://pico.org.cn/"> Pico </a></p><blockquote><p> Pico  RP2040</p></blockquote><h3 id="pico-">Pico </h3><p><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://www.zhihu.com/question/440677296">[3]</span></a></sup>ESP32PicoMicroPython</p><ul><li> Arm Cortex-M0 + @ 133MHz</li><li> 264KB SRAM  2MB </li><li> QSPI  16MB </li><li>DMA </li><li>30  GPIO  4 </li><li>2  UART2  SPI  2  I2C </li><li>16  PWM </li><li>USB 1.1 </li><li>8  I/OPIO</li><li> UF2  USB </li></ul><blockquote><p><strong>SRAM</strong>SRAM (static RAM) is random accessmemory (RAM) that retains data bits in its memory as long as power isbeing supplied. Unlike dynamic RAM (DRAM), which stores bits in cellsconsisting of a capacitor and a transistor, SRAM does not have to beperiodically refreshed. Static RAM provides faster access to data and ismore expensive than DRAM. SRAM is used for a computer's cache memory andas part of the random access memory digital-to-analog converter on avideocard.<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://whatis.techtarget.com/definition/SRAM-static-random-access-memory">[1]</span></a></sup></p></blockquote><blockquote><p><strong>QSPI</strong>QSPIQueuedSPIMotorolaSPISPISPIMotorolaQSPIFlash<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://www.cnblogs.com/firege/p/9435349.html">[2]</span></a></sup></p></blockquote><blockquote><p><strong>PIO</strong>PicoPIOI/OCPU<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://www.zhihu.com/question/440677296">[3]</span></a></sup></p></blockquote><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main/img/2022/pico/20220212190432.png" width="1000"><center>Pico</center></center><h3 id="pico">Pico</h3><p>C++SDKPicoSDKSTM32SDKC++MicroPythonSDKMicroPython<ahref="https://datasheets.raspberrypi.com/pico/raspberry-pi-pico-python-sdk.pdf">PicoPython SDK</a><ahref="https://datasheets.raspberrypi.com/rp2040/hardware-design-with-rp2040.pdf">RP2040</a><ahref="https://datasheets.raspberrypi.com/rp2040/rp2040-datasheet.pdf">RP2040Datasheet</a><ahref="https://datasheets.raspberrypi.com/pico/pico-datasheet.pdf">PicoDatasheet</a>RP2040Pico</p><h2 id="pycharm-micropython-">PyCharm MicroPython </h2><p>PyCharmSettings-PluginsMicroPythonProjectSettings-Languages&amp; Frameworks-MicroPythonDevicetypeDevice pathlinuxubuntudev/ttyACM0LEDREPL</p><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> machine <span class="hljs-keyword">import</span> Pin<br><span class="hljs-keyword">import</span> time<br><br>led = Pin(<span class="hljs-number">25</span>, Pin.OUT)<br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    led.value(<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;led light on&quot;</span>)<br>    time.sleep(<span class="hljs-number">1</span>)<br><br>    led.value(<span class="hljs-number">0</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;led light off&quot;</span>)<br>    time.sleep(<span class="hljs-number">1</span>)<br><br></code></pre></td></tr></table></figure><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/pico/20220212200558.png" width="600"><center>Pico</center></center><h2 id="reference">Reference</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1"class="footnote-text"><span>https://whatis.techtarget.com/definition/SRAM-static-random-access-memory<a href="#fnref:1" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:2"class="footnote-text"><span>https://www.cnblogs.com/firege/p/9435349.html<a href="#fnref:2" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:3"class="footnote-text"><span>https://www.zhihu.com/question/440677296<a href="#fnref:3" rev="footnote" class="footnote-backref"></a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category></category>
      
      <category>Raspberry Pico</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Raspberry</tag>
      
      <tag>Pico</tag>
      
      <tag>MicroPython</tag>
      
      <tag></tag>
      
      <tag>Python</tag>
      
      <tag>PyCharm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/02/04/2022-2-4-Music-Arrangment-Content/"/>
    <url>/2022/02/04/2022-2-4-Music-Arrangment-Content/</url>
    
    <content type="html"><![CDATA[<p>midibtwOxygenpro miniAbleton 11 suite</p><h2 id=""></h2><ul><li><a href="https://space.bilibili.com/13639412">b</a></li><li><ahref="https://space.bilibili.com/13887335?spm_id_from=333.788.b_765f7570696e666f.1">bUp</a></li><li><ahref="https://www.bilibili.com/video/BV14x411s7KZ?p=15&amp;spm_id_from=pageDriver">B301P</a></li><li><ahref="https://www.bilibili.com/video/BV1bx411s7A5?spm_id_from=333.999.0.0">FLStudio</a></li><li><ahref="https://www.bilibili.com/video/BV1CE411g7Wz/?spm_id_from=333.788.recommend_more_video.7">B</a></li><li><a href="https://www.bilibili.com/video/BV1Mg411A7b3?p=7">AbletonLive11|</a></li><li><ahref="https://www.bilibili.com/video/BV1Wb4y1X76D?p=1">AbletonLive11 </a></li><li><ahref="https://www.bilibili.com/video/BV1Tb4y1y7dg">MIDIOXYGENPRO MINI</a></li><li><ahref="https://www.bilibili.com/video/BV1qB4y1T7dQ">50</a></li><li><ahref="https://space.bilibili.com/285766656?spm_id_from=333.788.b_765f7570696e666f.1">b</a></li><li><a href="http://www.fhdq.net/ts/96.html"></a></li></ul><h2 id=""></h2><ol type="1"><li><ahref="https://judera9.github.io/2022/01/30/2022-1-30-Music-Theory/"></a></li><li><a href=""></a></li><li><a href=""></a></li><li><a href="">Oxygen pro mini</a></li><li><a href="">Ableton 11 suite</a></li></ol>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category></category>
      
    </categories>
    
    
    <tags>
      
      <tag></tag>
      
      <tag>b</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Effective C++ 0 </title>
    <link href="/2022/02/02/2022-2-2-Effective-Cpp-Introduction/"/>
    <url>/2022/02/02/2022-2-2-Effective-Cpp-Introduction/</url>
    
    <content type="html"><![CDATA[<h2 id="terminology">Terminology</h2><h3 id="-declaration">-declaration</h3><p>C++ Primer</p><blockquote><p></p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><pre><code class="hljs Cpp"><span class="hljs-keyword">extern</span> <span class="hljs-keyword">int</span> x; <span class="hljs-comment">// declare an object</span><br><span class="hljs-function">std::<span class="hljs-keyword">size_t</span> <span class="hljs-title">numDigits</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span></span>; <span class="hljs-comment">// declare a function</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Widget</span>;</span> <span class="hljs-comment">// declare a class</span><br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt; <span class="hljs-comment">// declare a template</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GraphNode</span>;</span><br></code></pre></td></tr></table></figure><h4 id="extern">extern</h4><p>externextern<code>externint x;</code><code>intx;</code>initialization<code>externint x = 1;</code></p><p><code>&#123;&#125;</code><strong><code>Clang-Tidy:Redundant 'foo'declaration</code></strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span></span>; <span class="hljs-comment">// declaration</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span></span>; <span class="hljs-comment">// redundant declaration</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span></span>&#123; <span class="hljs-comment">// definition</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="std">std</h4><p>C++<code>std::</code><code>usenamespacestd;</code>C++Primer Plus-</p><blockquote><p>usingusingusing<strong></strong></p></blockquote><h4 id="size_t">size_t</h4><p>size_tC++Programmertypedefunsignedintegersize_tIP16L32I16PL32<ahref="http://web.archive.org/web/20101209143037/http://www.eetimes.com/discussion/programming-pointers/4026076/Why-size-t-matters?">Whysize_t matters</a></p><h4 id="-signature">-signature</h4><p>C++signaturesignaturesignature</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span></span>;<br></code></pre></td></tr></table></figure><p>declarationC++14<em>Functions that differ onlyin their return type cannot beoverloaded</em>C89Csignature</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span></span>;<br></code></pre></td></tr></table></figure><h3 id="-definition">-definition</h3><p><em>definition</em>C++Primer</p><blockquote><p></p></blockquote><h4 id=""></h4><p><ahref="https://blog.csdn.net/sjxbf/article/details/6310150">C++</a></p><ol type="1"><li>.h</li><li>constinline</li><li>static</li><li></li></ol><h3 id="-initialization">-initialization</h3><p>constructordefaultcopycopyassignment</p><h4 id="default">default</h4><p>default<em></em><strong>explicitimplicittype conversions</strong></p><h4 id="copycopy-assignment">copycopyassignment</h4><p>copy<em></em>copyassignment<em></em>copycopy<strong>pass-by-valuepass-by-reference-to-const</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Widget</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Widget</span>(); <span class="hljs-comment">// default</span><br>    <span class="hljs-built_in">Widget</span>(<span class="hljs-keyword">const</span> Widget&amp; rhs); <span class="hljs-comment">// copy</span><br>    Widget&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> Widget&amp; rhs); <span class="hljs-comment">// copy assignment</span><br>    ...<br>&#125;;<br>Widget w1; <span class="hljs-comment">// default</span><br><span class="hljs-function">Widget <span class="hljs-title">w2</span><span class="hljs-params">(w1)</span></span>; <span class="hljs-comment">// copy</span><br>w1 = w2; <span class="hljs-comment">// copy assignment</span><br></code></pre></td></tr></table></figure><h3 id="standard-template-library-stl">Standard TemplateLibrary-STL</h3><p>C++vectorlistsetmapiteratorset<string>::iteratorfor_eachfindsortSTLC++STL</p><h3 id="-undefined-behavior">-undefinedbehavior</h3><p>undefinedbehaviorC++undefinedbehaviorname6</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">char</span> name[] = <span class="hljs-string">&quot;Darla&quot;</span>;<br><span class="hljs-keyword">char</span> c = name[<span class="hljs-number">10</span>];<br>std::cout &lt;&lt; c &lt;&lt; std::endl;<br></code></pre></td></tr></table></figure><h2 id="tr1boost">TR1Boost</h2><p>TR1C++BoostC++</p><ul><li><ahref="https://www.runoob.com/cplusplus/cpp-useful-resources.html">C++</a></li><li><a href="https://en.cppreference.com/w/cpp/header">C++ StandardLibrary headers</a></li><li><a href="https://en.wikibooks.org/wiki/C++_Programming">C++Programming</a></li><li><a href="http://www.sunistudio.com/cppfaq/">C++ FAQ LITE Frequently Asked Questions</a></li><li><a href="https://www.thefreecountry.com/sourcecode/cpp.shtml">Free C/ C++ Libraries, Source Code and Frameworks</a></li><li><a href="https://www.boost.org/">boost</a></li></ul>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category>Effective C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag></tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Effective C++ </title>
    <link href="/2022/02/02/2022-2-2-Effective-Cpp-Content/"/>
    <url>/2022/02/02/2022-2-2-Effective-Cpp-Content/</url>
    
    <content type="html"><![CDATA[<p>Effective C++55C++<em></em>C++C++EffectiveC++</p><p></p><p>C++C++<ahref="https://space.bilibili.com/519963684?from=search&amp;seid=2332289542653409243&amp;spm_id_from=333.337.0.0">b</a><ahref="https://github.com/ShiqiYu/CPP"></a>ppt</p><h2 id="catalog">Catalog</h2><ol start="0" type="1"><li><ahref="https://judera9.github.io/2022/02/02/2022-2-2-Effective-Cpp-Introduction/">Introduction</a></li><li><a href="">Accustoming Yourself to C++</a></li><li><a href="">Constructors, Destructors, and AssignmentOperators</a></li><li><a href="">Resource Management</a></li><li><a href="">Designs and Declarations</a></li><li><a href="">Implementations</a></li><li><a href="">Inheritance and Object-Oriented Design</a></li><li><a href="">Templates and Generic Programming</a></li><li><a href="">Customizing new and delete</a></li><li><a href="">Miscellany</a></li></ol>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category>Effective C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag></tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/01/30/2022-1-30-Surfskate-Selection/"/>
    <url>/2022/01/30/2022-1-30-Surfskate-Selection/</url>
    
    <content type="html"><![CDATA[<hr /><h2 id="surfskate">Surfskate</h2><p>996</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/surfskate/Surfskate-Selection-surf.jpeg" height="250" /></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/surfskate/Surfskate-Selection-ski.png" height="250" /></div></div></div><h2 id=""></h2><p><ahref="https://www.zhihu.com/people/surfskate"></a>Yow</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/others/choose_surfskate.jpg" width=1000"></center><h2 id=""></h2>    <div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">        <iframe src="//player.bilibili.com/player.html?aid=62322438&bvid=BV1ht411M78i&cid=108319980&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe>    </div><p></p><ul><li><a href="https://www.bilibili.com/video/av89625664">YOW Surf YOW Systems Tutorial</a></li><li><ahref="https://zhuanlan.zhihu.com/p/105870163">CarverSurfskate</a></li><li><ahref="https://space.bilibili.com/508830">b</a></li></ul><h2 id="show">show</h2><ol type="1"><li><ahref="https://zhuanlan.zhihu.com/p/82459365">surfskate</a></li><li><ahref="https://www.bilibili.com/video/BV1wy4y1E7KL?from=search&amp;seid=16512587863776667224&amp;spm_id_from=333.337.0.0">(PowerSlide)|</a></li></ol><p><em> (==)o</em></p>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category></category>
      
      <category>//</category>
      
    </categories>
    
    
    <tags>
      
      <tag>surfskate</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/01/30/2022-1-30-Music-Theory/"/>
    <url>/2022/01/30/2022-1-30-Music-Theory/</url>
    
    <content type="html"><![CDATA[<p><ahref="https://www.bilibili.com/video/BV14x411s7KZ?p=1">bilibili</a></p><span id="more"></span><h2 id=""></h2><p><strong>++</strong><strong></strong></p><h3 id=""></h3><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220204192938.png" width="550"><center> 1</center></center><ul><li></li><li></li></ul><blockquote><p>sou5re23(5-2)+1=4&gt;_&lt;|||</p></blockquote><h3 id=""></h3><p>1<strong>/</strong></p><h3 id=""></h3><p>CC2</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220204203925.png" width="550"><center> 2</center></center><p></p><ol type="1"><li></li><li>3</li></ol><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220204204602.png" width="550"><center> 3</center></center><p>FD4FFD6109</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220204205257.png" width="550"><center> 4</center></center><blockquote><p>EFBCFDFGBCFD</p></blockquote><h2 id=""></h2><p><strong></strong>7CB</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220204223656.png" width="550"><center> 5</center></center><h3 id=""></h3><p><strong></strong>6</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220204231246.png" width="550"><center> 6</center></center><p>FAC+=FFAC+=FFAC+=FF</p><h3 id=""></h3><p><strong></strong><strong></strong>7</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220204233441.png" width="550"><center> 7</center></center><p>DFAC+=DDFAC+=DDFAC+=DD</p><blockquote><p></p><ul><li><p>+=</p></li><li><p>+=</p></li><li><p>+=</p></li><li><p>+=</p></li><li><p>+=</p></li></ul></blockquote><h3 id=""></h3><p>8CC8<strong>C/EC/CCEE</strong>C/GC/EE135513C</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220204234704.png" width="550"><center> 8</center></center><p>CM7CCEGBCM7/EE...EGBCG...GBCE9D7DD7/FD7/AD7/C</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220205000556.png" width="550"><center> 9</center></center><h2 id=""></h2><p></p><h3 id=""></h3><p><strong>CDEFGABC</strong>CDDEFGABCDEEFGABCDE10</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220205103723.png" width="550"><center> 10</center></center><h3 id=""></h3><p><strong>ABCDEFGA</strong>ACCDEFGABC11CA<strong></strong>CCAA33CE</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220205110501.png" width="550"><center> 11</center></center><h3 id=""></h3><blockquote><p><strong></strong></p></blockquote>    <div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">        <iframe src="//player.bilibili.com/player.html?aid=43075656&bvid=BV1cb411S7ra&cid=141283989&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe>    </div><h3 id=""></h3><p>12EEEFGABCDEEFGABCDEEEFGABCDE</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220205140927.png" width="550"><center> 12</center></center><h2 id=""></h2><p>13143/4</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220205141824.png" width="550"><center> 13</center></center><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220205142042.png" width="550"><center> 14</center></center><h3 id=""></h3><p>=+15n</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220205142607.png" width="550"><center> 15</center></center><h3 id=""></h3><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220205143000.png" width="550"><center> 16</center></center><h3 id=""></h3><p>24<strong></strong>1744<strong></strong>9158</p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main//img/2022/music/20220205144219.png" width="550"><center> 17</center></center>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category></category>
      
    </categories>
    
    
    <tags>
      
      <tag></tag>
      
      <tag>b</tag>
      
      <tag></tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/01/30/2022-1-30-Robot-Introduction/"/>
    <url>/2022/01/30/2022-1-30-Robot-Introduction/</url>
    
    <content type="html"><![CDATA[<div class="row">    <embed src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main/file/robotIntroductionPaper.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category></category>
      
    </categories>
    
    
    <tags>
      
      <tag></tag>
      
      <tag></tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/01/30/2022-1-30-Takarazuka-Revue/"/>
    <url>/2022/01/30/2022-1-30-Takarazuka-Revue/</url>
    
    <content type="html"><![CDATA[<h2 id=""></h2><p>2021</p><h2 id=""></h2><p><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint--rounded" aria-label=".[J].,2021(03):83-84.">[1]</span></a></sup></p><p></p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main/img/2022/takarazuka/Takarazuka-Revue-1.png" width="300"><center></center></center><h2 id=""></h2><p>20217</p><p>lovelive</p><p>OG<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="!!.https://www.bilibili.com/read/cv12419830.">[2]</span></a></sup></p><center><img src="https://cdn.jsdelivr.net/gh/Judera9/Pictures-for-Blogs@main/img/2022/takarazuka/Takarazuka-Revue-2.png" width="300"><center></center></center><h2 id=""></h2><p><em>5050</em></p><p></p><p></p><p></p><p></p><h2 id=""></h2><p></p><p><em></em><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="!!.https://www.bilibili.com/read/cv12419830.">[2]</span></a></sup></p><p></p><p></p><h2 id=""></h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>.[J].,2021(03):83-84.<a href="#fnref:1" rev="footnote" class="footnote-backref"></a></span></span></li><li><span id="fn:2"class="footnote-text"><span>!!.https://www.bilibili.com/read/cv12419830.<a href="#fnref:2" rev="footnote" class="footnote-backref"></a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category></category>
      
      <category></category>
      
    </categories>
    
    
    <tags>
      
      <tag></tag>
      
      <tag></tag>
      
      <tag></tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
